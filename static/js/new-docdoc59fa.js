function LoadingDialog(e){this.parent=e||document.body,this.dialog=this.createDialog()}function debounce(e,t){var i=null;return function(){i||(e.apply(this,arguments),i=1,setTimeout(function(){i=null},t))}}function disableEvent(e){return e.preventDefault(),!1}function ratingPopupInit(e){$(".js-rating-card",e).hover(function(){$(this).find(".js-rating-popup").fadeIn(300)},function(){$(this).find(".js-rating-popup").finish().hide()})}function onPopupOpen(e,t){$(".req_form",t).each(function(){requestValidate($(this))});var i=$(e).data("doctorId");$("input[name=doctor]",t).val(i),t.find(".js-request-popup-doctor").text($(e).data("doctorName"));var a=$(e).data("doctor-price");$("input[name=price]",t).val(a);var n=$(e).data("doctor-special-price");$("input[name=special_price]",t).val(n);var s=$(e).data("clinicId");$("input[name=clinic]",t).val(s),$(".js-request-popup-clinic",t).text($(e).data("clinicName")),$(".popup-book__info-name").text($(e).data("clinicName")),$(".popup-book__info-address").text($(e).data("clinicAddress"));var o=$(e).data("serviceId");o?($("input[name=service]",t).val(o),$(".js-request-popup-service",t).text($(e).data("serviceName"))):$(".js-request-popup-service",t).parents(".req_form_row").hide(),$("input[type=submit]",t).attr("data-stat-trigger",$(e).data("stat"));var r=$(e).nextAll("div").find(".request_tel_number").text();""==r&&(r=$(".header_contact_phone").text()),""==r?$(".popup-book__call",t).hide():($(".popup-book__call",t).show(),$(".popup-book__call-phone",t).text(r));var l=$(".req_form");l.hasClass("s-closed")&&(l.removeClass("s-closed").show(),$(".js-request-success").hide()),$("[name=requestName]",t).focus(),$document.trigger("requestPopupReady",{doctor_id:i,clinic_id:s,price:a,special_price:n})}function getMoreDoctorsForClinic(e){var t=$(".clinic-tab-content--doctors"),i=$(".clinic-card-doctors-all__link",t);if(!i.hasClass("loading")){i.addClass("loading").text("");var a=[];$(".schedule-days .schedule-days__item").each(function(e,t){a.push($(t).data("date"))}),$.ajax({url:"/clinic/moreDoctors",data:{clinicId:i.data("clinicId"),speciality:i.data("speciality"),branchGroup:i.data("branch-group"),offset:e?null:$(".result-list .doctor-card",t).length,dates:a}}).done(function(a){var n=$(".result-list",t);if(a.success){if(0==a.doctors.length)i.hide();else if(a.doctors){var s=parseInt(i.data("countMore"),10);e&&(s=a.countAll,n.empty(),$(".clinic_card_doctors_count",t).text(a.countAll+" "+declension(a.countAll,["врач","врача","врачей"]))),a.doctors.forEach(function(e){var t=document.createElement("div");t.innerHTML=e,$(".js-tooltip-custom",t).tooltipster({content:$(".js-tooltip-html",t).children(),theme:"tooltip"}),n.append(t.childNodes),s--}),$(".result-list",t).hasClass("schedule-load")&&(window.scheduleTools.init(),aload()),i.data("countMore",s),s>0?(s>10&&(s=10),i.removeClass("loading").text("показать еще "+s+" "+declension(s,["врача","врачей","врачей"]))):i.hide()}}else i.show();$(".carousel__list").trigger("reloadSliders")}).error(function(){i.removeClass("loading").text("показать еще 10 врачей")})}}function getMoreReviewsText(e){return"<span>Показать</span> еще "+e+" "+declension(e,["отзыв","отзыва","отзывов"])}function getMoreReviewsForClinic(){var e=$(".reviews"),t=$(".reviews__more",e),i=$(".toggle-hidden:hidden",e),a=+t.data("countMore"),n=+t.data("moreLimit");if(t.hide(),i.length){i.slideDown();var s=a>n?n:a;return void(s&&(t.html(getMoreReviewsText(s)),t.show()))}$.ajax({url:"/clinic/moreReviews",data:{clinicId:t.data("clinicId"),speciality:t.data("speciality"),isBranchGroup:t.data("branch-group"),offset:$(".reviews__item",e).length}}).done(function(i){if(t.show(),i.reviews){var s=i.reviews.length,o=i.reviews.join("");a-=s,$(".reviews__items",e).append(o),t.data("countMore",a),a&&a<n&&t.html(getMoreReviewsText(a)),0===a&&t.hide(),doctorFix()}}).error(function(){t.show()})}function getCookie(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}function declension(e,t){var i=e%100;return i>=5&&i<=20?t[2]:(i%=10,t[1==i?"0":i>=2&&i<=4?"1":"2"])}function initRatingStars(){function e(e,t){d.addClass("button_submit--gray").prop("disabled",!0),$.post("/site/phoneValidateCode",{phone:e,resendCode:t},n,"json")}function t(e){var t=e.attr("name"),a=e.val(),n=!1,s=!1,o="";switch(t){case"rating_doctor":case"rating_clinic":if(n=!0,""==a){o=reviewMessages.reviewRating.required;break}s=!0;break;case"reviewComment":if(n=!0,1==e.data("required")){if(!a){o=reviewMessages.reviewComment.required;break}if(a.length<10){o=reviewMessages.reviewComment.minlength;break}}s=!0;break;case"reviewName":if(n=!0,!a){o=reviewMessages.reviewName.required;break}if(a.length>=70){o=reviewMessages.reviewName.maxlength;break}if(/\d/g.test(a)){o=reviewMessages.reviewName.onlyLetters;break}s=!0;break;case"reviewPhone":if(n=!0,!a){o=reviewMessages.reviewPhone.required;break}if(a.length<18){o=reviewMessages.reviewPhone.minlength;break}s=!0;break;case"validatePhoneCode":if(n=!0,u&&a.length<4){o=reviewMessages.validatePhoneCode.required;break}s=!0,e.trigger("change")}n&&!s&&i(e,o)}function i(e,t){var i=e.parents(".reviewform__field");e.addClass(p),i.find(".label-error").addClass(p).show().text(t),i.find("label.reviewform__icon").addClass(p)}function a(){return c.each(function(){t($(this))}),0==$(".reviewform__input.error",l).length}function n(){u=!0,d.removeClass("button_submit--gray").prop("disabled",!1),$(".reviewform__code").removeClass("hidden"),$("#validatePhoneCode",l).focus(),s()}function s(){var e=29,t=$(".js-repeat-validate-code-count",l),i=$(".js-repeat-validate-code-interval",l),a=$(".js-repeat-validate-code",l);if(0==f)return void a.hide();t.text("("+f+")"),f--,a.off("click",o).removeClass("hover"),i.show();var n=setInterval(function(){if(0!=e)return i.text("через "+e+" сек."),void e--;clearInterval(n),i.hide().text("через 30 сек."),a.on("click",o).addClass("hover")},1e3)}function o(){if(u=!1,!a())return!1;e(h.val(),1)}var r,l=$(".review_form"),c=$(".reviewform__input",l),d=$(".button_submit",l),h=$('input[type="tel"]',l),u=!1,p="error";isAuthorized&&h.length>0&&jsonrpc("cabinet.getProfileInfo").then(function(e){r=e;var t=h.masked(e.phone);h.val(t),$("#reviewName",l).val(e.name+" "+e.surname)}),c.on("focus change",function(){var e=$(this),t=e.parents(".reviewform__field");e.removeClass(p),t.find(".label-error").removeClass(p).hide(),t.find("label.reviewform__icon").removeClass(p)});var f=2,g=!1;l.submit(function(){if(!a())return!1;if(!u&&!isAuthorized)return e(h.val(),0),!1;var t=l.attr("action");return $.ajax({type:"POST",url:t,data:l.serialize(),dataType:"JSON",beforeSend:function(){if(d.addClass("button_submit--gray").prop("disabled",!0),void 0!=l.data("submiting")&&!g)return!1;l.data("submiting","1")},success:function(e){var t=$(".validation-error");if(d.removeClass("button_submit--gray").prop("disabled",!1),"error"==e.status)return t.removeClass("hidden").text(e.error),"Введен некорректный код подтверждения"==e.error&&(g=!0),!1;t.addClass("hidden"),l.slideUp(300,function(){$("body").animate({scrollTop:$(".js-review-form").offset().top},200,function(){$(".reviewform__success").show()})})},error:function(e){console.error(e)}}),!1})}function throttle(e,t){function i(){if(s)return a=arguments,void(n=this);e.apply(this,arguments),s=!0,setTimeout(function(){s=!1,a&&(i.apply(n,a),a=n=null)},t)}var a,n,s=!1;return i}function isScrolledIntoView(e){var t=$window.scrollTop(),i=t+$window.height(),a=e.offset().top;return a+e.height()<=i&&a>=t}function checkFirstScreenHeight(){var e=window.orientation;(0==e||180==e)&&$window.height()<$firstScreen.height()&&setTimeout(function(){$firstScreen.height(windowHeight)},750)}function initExpander(){var e=function(e){e.preventDefault(),e.stopPropagation();var t=$(this);t.closest(".schedule").toggleClass("schedule_active");var i=t.closest(".doc");i.length>0&&$html.animate({scrollTop:i.offset().top-58},500),app.rightbar()};$(".doctors").on(pressEventEnd,".schedule__cell_expand",e),$(".clinics").on(pressEventEnd,".schedule__cell_expand",e)}(function(){var e,t;e=this.jQuery||window.jQuery,t=e(window),e.fn.stick_in_parent=function(i){var a,n,s,o,r,l,c,d,h,u,p;for(null==i&&(i={}),p=i.sticky_class,r=i.inner_scrolling,u=i.recalc_every,h=i.parent,d=i.offset_top,c=i.spacer,n=i.bottoming,null==d&&(d=0),null==h&&(h=void 0),null==r&&(r=!0),null==p&&(p="is_stuck"),a=e(document),null==n&&(n=!0),s=function(i,s,o,l,f,g,m,v){var _,b,w,y,k,$,D,x,C,T,M,S;if(!i.data("sticky_kit")){if(i.data("sticky_kit",!0),k=a.height(),D=i.parent(),null!=h&&(D=D.closest(h)),!D.length)throw"failed to find stick parent";if(_=w=!1,(M=null!=c?c&&i.closest(c):e("<div />"))&&M.css("position",i.css("position")),x=function(){var e,t,n;if(!v&&(k=a.height(),e=parseInt(D.css("border-top-width"),10),t=parseInt(D.css("padding-top"),10),s=parseInt(D.css("padding-bottom"),10),o=D.offset().top+e+t,l=D.height(),w&&(_=w=!1,null==c&&(i.insertAfter(M),M.detach()),i.css({position:"",top:"",width:"",bottom:""}).removeClass(p),n=!0),f=i.offset().top-(parseInt(i.css("margin-top"),10)||0)-d,g=i.outerHeight(!0),m=i.css("float"),M&&M.css({width:i.outerWidth(!0),height:g,display:i.css("display"),"vertical-align":i.css("vertical-align"),float:m}),n))return S()},x(),g!==l)return y=void 0,$=d,T=u,S=function(){var e,h,b,C;if(!v&&(b=!1,null!=T&&0>=--T&&(T=u,x(),b=!0),b||a.height()===k||x(),b=t.scrollTop(),null!=y&&(h=b-y),y=b,w?(n&&(C=b+g+$>l+o,_&&!C&&(_=!1,i.css({position:"fixed",bottom:"",top:$}).trigger("sticky_kit:unbottom"))),b<f&&(w=!1,$=d,null==c&&("left"!==m&&"right"!==m||i.insertAfter(M),M.detach()),e={position:"",width:"",top:""},i.css(e).removeClass(p).trigger("sticky_kit:unstick")),r&&(e=t.height(),g+d>e&&!_&&($-=h,$=Math.max(e-g,$),$=Math.min(d,$),w&&i.css({top:$+"px"})))):b>f&&(w=!0,e={position:"fixed",top:$},e.width="border-box"===i.css("box-sizing")?i.outerWidth()+"px":i.width()+"px",i.css(e).addClass(p),null==c&&(i.after(M),"left"!==m&&"right"!==m||M.append(i)),i.trigger("sticky_kit:stick")),w&&n&&(null==C&&(C=b+g+$>l+o),!_&&C)))return _=!0,"static"===D.css("position")&&D.css({position:"relative"}),i.css({position:"absolute",bottom:s,top:"auto"}).trigger("sticky_kit:bottom")},C=function(){return x(),S()},b=function(){if(v=!0,t.off("touchmove",S),t.off("scroll",S),t.off("resize",C),e(document.body).off("sticky_kit:recalc",C),i.off("sticky_kit:detach",b),i.removeData("sticky_kit"),i.css({position:"",bottom:"",top:"",width:""}),D.position("position",""),w)return null==c&&("left"!==m&&"right"!==m||i.insertAfter(M),M.remove()),i.removeClass(p)},t.on("touchmove",S),t.on("scroll",S),t.on("resize",C),e(document.body).on("sticky_kit:recalc",C),i.on("sticky_kit:detach",b),setTimeout(S,0)}},o=0,l=this.length;o<l;o++)i=this[o],s(e(i));return this}}).call(this),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){function t(t,a){var n,s,o,r=t.nodeName.toLowerCase();return"area"===r?(n=t.parentNode,s=n.name,!(!t.href||!s||"map"!==n.nodeName.toLowerCase())&&(!!(o=e("img[usemap='#"+s+"']")[0])&&i(o))):(/^(input|select|textarea|button|object)$/.test(r)?!t.disabled:"a"===r?t.href||a:a)&&i(t)}function i(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}function a(e){for(var t,i;e.length&&e[0]!==document;){if(("absolute"===(t=e.css("position"))||"relative"===t||"fixed"===t)&&(i=parseInt(e.css("zIndex"),10),!isNaN(i)&&0!==i))return i;e=e.parent()}return 0}function n(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},e.extend(this._defaults,this.regional[""]),this.regional.en=e.extend(!0,{},this.regional[""]),this.regional["en-US"]=e.extend(!0,{},this.regional.en),this.dpDiv=s(e("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function s(t){var i="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.delegate(i,"mouseout",function(){e(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).removeClass("ui-datepicker-next-hover")}).delegate(i,"mouseover",o)}function o(){e.datepicker._isDisabledDatepicker(h.inline?h.dpDiv.parent()[0]:h.input[0])||(e(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),e(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).addClass("ui-datepicker-next-hover"))}function r(t,i){e.extend(t,i);for(var a in i)null==i[a]&&(t[a]=i[a]);return t}e.ui=e.ui||{},e.extend(e.ui,{version:"1.11.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({scrollParent:function(t){var i=this.css("position"),a="absolute"===i,n=t?/(auto|scroll|hidden)/:/(auto|scroll)/,s=this.parents().filter(function(){var t=e(this);return(!a||"static"!==t.css("position"))&&n.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==i&&s.length?s:e(this[0].ownerDocument||document)},uniqueId:function(){var e=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(i){return!!e.data(i,t)}}):function(t,i,a){return!!e.data(t,a[3])},focusable:function(i){return t(i,!isNaN(e.attr(i,"tabindex")))},tabbable:function(i){var a=e.attr(i,"tabindex"),n=isNaN(a);return(n||a>=0)&&t(i,!n)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(t,i){function a(t,i,a,s){return e.each(n,function(){i-=parseFloat(e.css(t,"padding"+this))||0,a&&(i-=parseFloat(e.css(t,"border"+this+"Width"))||0),s&&(i-=parseFloat(e.css(t,"margin"+this))||0)}),i}var n="Width"===i?["Left","Right"]:["Top","Bottom"],s=i.toLowerCase(),o={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+i]=function(t){return void 0===t?o["inner"+i].call(this):this.each(function(){e(this).css(s,a(this,t)+"px")})},e.fn["outer"+i]=function(t,n){return"number"!=typeof t?o["outer"+i].call(this,t):this.each(function(){e(this).css(s,a(this,t,!0,n)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(i){return arguments.length?t.call(this,e.camelCase(i)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.fn.extend({focus:function(t){return function(i,a){return"number"==typeof i?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),a&&a.call(t)},i)}):t.apply(this,arguments)}}(e.fn.focus),disableSelection:function(){var e="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(e+".ui-disableSelection",function(e){e.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(t){if(void 0!==t)return this.css("zIndex",t);if(this.length)for(var i,a,n=e(this[0]);n.length&&n[0]!==document;){if(("absolute"===(i=n.css("position"))||"relative"===i||"fixed"===i)&&(a=parseInt(n.css("zIndex"),10),!isNaN(a)&&0!==a))return a;n=n.parent()}return 0}}),e.ui.plugin={add:function(t,i,a){var n,s=e.ui[t].prototype;for(n in a)s.plugins[n]=s.plugins[n]||[],s.plugins[n].push([i,a[n]])},call:function(e,t,i,a){var n,s=e.plugins[t];if(s&&(a||e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType))for(n=0;n<s.length;n++)e.options[s[n][0]]&&s[n][1].apply(e.element,i)}};var l=0,c=Array.prototype.slice;e.cleanData=function(t){return function(i){var a,n,s;for(s=0;null!=(n=i[s]);s++)try{a=e._data(n,"events"),a&&a.remove&&e(n).triggerHandler("remove")}catch(e){}t(i)}}(e.cleanData),e.widget=function(t,i,a){var n,s,o,r,l={},c=t.split(".")[0];return t=t.split(".")[1],n=c+"-"+t,a||(a=i,i=e.Widget),e.expr[":"][n.toLowerCase()]=function(t){return!!e.data(t,n)},e[c]=e[c]||{},s=e[c][t],o=e[c][t]=function(e,t){if(!this._createWidget)return new o(e,t);arguments.length&&this._createWidget(e,t)},e.extend(o,s,{version:a.version,_proto:e.extend({},a),_childConstructors:[]}),r=new i,r.options=e.widget.extend({},r.options),e.each(a,function(t,a){if(!e.isFunction(a))return void(l[t]=a);l[t]=function(){var e=function(){return i.prototype[t].apply(this,arguments)},n=function(e){return i.prototype[t].apply(this,e)};return function(){var t,i=this._super,s=this._superApply;return this._super=e,this._superApply=n,t=a.apply(this,arguments),this._super=i,this._superApply=s,t}}()}),o.prototype=e.widget.extend(r,{widgetEventPrefix:s?r.widgetEventPrefix||t:t},l,{constructor:o,namespace:c,widgetName:t,widgetFullName:n}),s?(e.each(s._childConstructors,function(t,i){var a=i.prototype;e.widget(a.namespace+"."+a.widgetName,o,i._proto)}),delete s._childConstructors):i._childConstructors.push(o),e.widget.bridge(t,o),o},e.widget.extend=function(t){for(var i,a,n=c.call(arguments,1),s=0,o=n.length;s<o;s++)for(i in n[s])a=n[s][i],n[s].hasOwnProperty(i)&&void 0!==a&&(e.isPlainObject(a)?t[i]=e.isPlainObject(t[i])?e.widget.extend({},t[i],a):e.widget.extend({},a):t[i]=a);return t},e.widget.bridge=function(t,i){var a=i.prototype.widgetFullName||t;e.fn[t]=function(n){var s="string"==typeof n,o=c.call(arguments,1),r=this;return s?this.each(function(){var i,s=e.data(this,a);return"instance"===n?(r=s,!1):s?e.isFunction(s[n])&&"_"!==n.charAt(0)?(i=s[n].apply(s,o),i!==s&&void 0!==i?(r=i&&i.jquery?r.pushStack(i.get()):i,!1):void 0):e.error("no such method '"+n+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+n+"'")}):(o.length&&(n=e.widget.extend.apply(null,[n].concat(o))),this.each(function(){var t=e.data(this,a);t?(t.option(n||{}),t._init&&t._init()):e.data(this,a,new i(n,this))})),r}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,i){i=e(i||this.defaultElement||this)[0],this.element=e(i),this.uuid=l++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=e(),this.hoverable=e(),this.focusable=e(),i!==this&&(e.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===i&&this.destroy()}}),this.document=e(i.style?i.ownerDocument:i.document||i),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(t,i){var a,n,s,o=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(o={},a=t.split("."),t=a.shift(),a.length){for(n=o[t]=e.widget.extend({},this.options[t]),s=0;s<a.length-1;s++)n[a[s]]=n[a[s]]||{},n=n[a[s]];if(t=a.pop(),1===arguments.length)return void 0===n[t]?null:n[t];n[t]=i}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];o[t]=i}return this._setOptions(o),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!t),t&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(t,i,a){var n,s=this;"boolean"!=typeof t&&(a=i,i=t,t=!1),a?(i=n=e(i),this.bindings=this.bindings.add(i)):(a=i,i=this.element,n=this.widget()),e.each(a,function(a,o){function r(){if(t||!0!==s.options.disabled&&!e(this).hasClass("ui-state-disabled"))return("string"==typeof o?s[o]:o).apply(s,arguments)}"string"!=typeof o&&(r.guid=o.guid=o.guid||r.guid||e.guid++);var l=a.match(/^([\w:-]*)\s*(.*)$/),c=l[1]+s.eventNamespace,d=l[2];d?n.delegate(d,c,r):i.bind(c,r)})},_off:function(t,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(i).undelegate(i),this.bindings=e(this.bindings.not(t).get()),this.focusable=e(this.focusable.not(t).get()),this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){function i(){return("string"==typeof e?a[e]:e).apply(a,arguments)}var a=this;return setTimeout(i,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,i,a){var n,s,o=this.options[t];if(a=a||{},i=e.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],s=i.originalEvent)for(n in s)n in i||(i[n]=s[n]);return this.element.trigger(i,a),!(e.isFunction(o)&&!1===o.apply(this.element[0],[i].concat(a))||i.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,i){e.Widget.prototype["_"+t]=function(a,n,s){"string"==typeof n&&(n={effect:n});var o,r=n?!0===n||"number"==typeof n?i:n.effect||i:t;n=n||{},"number"==typeof n&&(n={duration:n}),o=!e.isEmptyObject(n),n.complete=s,n.delay&&a.delay(n.delay),o&&e.effects&&e.effects.effect[r]?a[t](n):r!==t&&a[r]?a[r](n.duration,n.easing,s):a.queue(function(i){e(this)[t](),s&&s.call(a[0]),i()})}});var d=(e.widget,!1);e(document).mouseup(function(){d=!1});e.widget("ui.mouse",{version:"1.11.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(i){if(!0===e.data(i.target,t.widgetName+".preventClickEvent"))return e.removeData(i.target,t.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!d){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var i=this,a=1===t.which,n=!("string"!=typeof this.options.cancel||!t.target.nodeName)&&e(t.target).closest(this.options.cancel).length;return!(a&&!n&&this._mouseCapture(t))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(t),!this._mouseStarted)?(t.preventDefault(),!0):(!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return i._mouseMove(e)},this._mouseUpDelegate=function(e){return i._mouseUp(e)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),d=!0,!0))}},_mouseMove:function(t){if(this._mouseMoved){if(e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button)return this._mouseUp(t);if(!t.which)return this._mouseUp(t)}return(t.which||t.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,t),this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),d=!1,!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}});e.extend(e.ui,{datepicker:{version:"1.11.4"}});var h;e.extend(n.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return r(this._defaults,e||{}),this},_attachDatepicker:function(t,i){var a,n,s;a=t.nodeName.toLowerCase(),n="div"===a||"span"===a,t.id||(this.uuid+=1,t.id="dp"+this.uuid),s=this._newInst(e(t),n),s.settings=e.extend({},i||{}),"input"===a?this._connectDatepicker(t,s):n&&this._inlineDatepicker(t,s)},_newInst:function(t,i){return{id:t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1"),input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:i,dpDiv:i?s(e("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(t,i){var a=e(t);i.append=e([]),i.trigger=e([]),a.hasClass(this.markerClassName)||(this._attachments(a,i),a.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(i),e.data(t,"datepicker",i),i.settings.disabled&&this._disableDatepicker(t))},_attachments:function(t,i){var a,n,s,o=this._get(i,"appendText"),r=this._get(i,"isRTL");i.append&&i.append.remove(),o&&(i.append=e("<span class='"+this._appendClass+"'>"+o+"</span>"),t[r?"before":"after"](i.append)),t.unbind("focus",this._showDatepicker),i.trigger&&i.trigger.remove(),a=this._get(i,"showOn"),"focus"!==a&&"both"!==a||t.focus(this._showDatepicker),"button"!==a&&"both"!==a||(n=this._get(i,"buttonText"),s=this._get(i,"buttonImage"),i.trigger=e(this._get(i,"buttonImageOnly")?e("<img/>").addClass(this._triggerClass).attr({src:s,alt:n,title:n}):e("<button type='button'></button>").addClass(this._triggerClass).html(s?e("<img/>").attr({src:s,alt:n,title:n}):n)),t[r?"before":"after"](i.trigger),i.trigger.click(function(){return e.datepicker._datepickerShowing&&e.datepicker._lastInput===t[0]?e.datepicker._hideDatepicker():e.datepicker._datepickerShowing&&e.datepicker._lastInput!==t[0]?(e.datepicker._hideDatepicker(),e.datepicker._showDatepicker(t[0])):e.datepicker._showDatepicker(t[0]),!1}))},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t,i,a,n,s=new Date(2009,11,20),o=this._get(e,"dateFormat");o.match(/[DM]/)&&(t=function(e){for(i=0,a=0,n=0;n<e.length;n++)e[n].length>i&&(i=e[n].length,a=n);return a},s.setMonth(t(this._get(e,o.match(/MM/)?"monthNames":"monthNamesShort"))),s.setDate(t(this._get(e,o.match(/DD/)?"dayNames":"dayNamesShort"))+20-s.getDay())),e.input.attr("size",this._formatDate(e,s).length)}},_inlineDatepicker:function(t,i){var a=e(t);a.hasClass(this.markerClassName)||(a.addClass(this.markerClassName).append(i.dpDiv),e.data(t,"datepicker",i),this._setDate(i,this._getDefaultDate(i),!0),this._updateDatepicker(i),this._updateAlternate(i),i.settings.disabled&&this._disableDatepicker(t),i.dpDiv.css("display","block"))},_dialogDatepicker:function(t,i,a,n,s){var o,l,c,d,h,u=this._dialogInst;return u||(this.uuid+=1,o="dp"+this.uuid,this._dialogInput=e("<input type='text' id='"+o+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),e("body").append(this._dialogInput),u=this._dialogInst=this._newInst(this._dialogInput,!1),u.settings={},e.data(this._dialogInput[0],"datepicker",u)),r(u.settings,n||{}),i=i&&i.constructor===Date?this._formatDate(u,i):i,this._dialogInput.val(i),this._pos=s?s.length?s:[s.pageX,s.pageY]:null,this._pos||(l=document.documentElement.clientWidth,c=document.documentElement.clientHeight,d=document.documentElement.scrollLeft||document.body.scrollLeft,h=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[l/2-100+d,c/2-150+h]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),u.settings.onSelect=a,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),e.blockUI&&e.blockUI(this.dpDiv),e.data(this._dialogInput[0],"datepicker",u),this},_destroyDatepicker:function(t){var i,a=e(t),n=e.data(t,"datepicker");a.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),e.removeData(t,"datepicker"),"input"===i?(n.append.remove(),n.trigger.remove(),a.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):"div"!==i&&"span"!==i||a.removeClass(this.markerClassName).empty(),h===n&&(h=null))},_enableDatepicker:function(t){var i,a,n=e(t),s=e.data(t,"datepicker");n.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),"input"===i?(t.disabled=!1,s.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):"div"!==i&&"span"!==i||(a=n.children("."+this._inlineClass),a.children().removeClass("ui-state-disabled"),
a.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}))},_disableDatepicker:function(t){var i,a,n=e(t),s=e.data(t,"datepicker");n.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),"input"===i?(t.disabled=!0,s.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):"div"!==i&&"span"!==i||(a=n.children("."+this._inlineClass),a.children().addClass("ui-state-disabled"),a.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}),this._disabledInputs[this._disabledInputs.length]=t)},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;t<this._disabledInputs.length;t++)if(this._disabledInputs[t]===e)return!0;return!1},_getInst:function(t){try{return e.data(t,"datepicker")}catch(e){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(t,i,a){var n,s,o,l,c=this._getInst(t);if(2===arguments.length&&"string"==typeof i)return"defaults"===i?e.extend({},e.datepicker._defaults):c?"all"===i?e.extend({},c.settings):this._get(c,i):null;n=i||{},"string"==typeof i&&(n={},n[i]=a),c&&(this._curInst===c&&this._hideDatepicker(),s=this._getDateDatepicker(t,!0),o=this._getMinMaxDate(c,"min"),l=this._getMinMaxDate(c,"max"),r(c.settings,n),null!==o&&void 0!==n.dateFormat&&void 0===n.minDate&&(c.settings.minDate=this._formatDate(c,o)),null!==l&&void 0!==n.dateFormat&&void 0===n.maxDate&&(c.settings.maxDate=this._formatDate(c,l)),"disabled"in n&&(n.disabled?this._disableDatepicker(t):this._enableDatepicker(t)),this._attachments(e(t),c),this._autoSize(c),this._setDate(c,s),this._updateAlternate(c),this._updateDatepicker(c))},_changeDatepicker:function(e,t,i){this._optionDatepicker(e,t,i)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var i=this._getInst(e);i&&(this._setDate(i,t),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(e,t){var i=this._getInst(e);return i&&!i.inline&&this._setDateFromField(i,t),i?this._getDate(i):null},_doKeyDown:function(t){var i,a,n,s=e.datepicker._getInst(t.target),o=!0,r=s.dpDiv.is(".ui-datepicker-rtl");if(s._keyEvent=!0,e.datepicker._datepickerShowing)switch(t.keyCode){case 9:e.datepicker._hideDatepicker(),o=!1;break;case 13:return n=e("td."+e.datepicker._dayOverClass+":not(."+e.datepicker._currentClass+")",s.dpDiv),n[0]&&e.datepicker._selectDay(t.target,s.selectedMonth,s.selectedYear,n[0]),i=e.datepicker._get(s,"onSelect"),i?(a=e.datepicker._formatDate(s),i.apply(s.input?s.input[0]:null,[a,s])):e.datepicker._hideDatepicker(),!1;case 27:e.datepicker._hideDatepicker();break;case 33:e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(s,"stepBigMonths"):-e.datepicker._get(s,"stepMonths"),"M");break;case 34:e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(s,"stepBigMonths"):+e.datepicker._get(s,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&e.datepicker._clearDate(t.target),o=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&e.datepicker._gotoToday(t.target),o=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,r?1:-1,"D"),o=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(s,"stepBigMonths"):-e.datepicker._get(s,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,-7,"D"),o=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,r?-1:1,"D"),o=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(s,"stepBigMonths"):+e.datepicker._get(s,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,7,"D"),o=t.ctrlKey||t.metaKey;break;default:o=!1}else 36===t.keyCode&&t.ctrlKey?e.datepicker._showDatepicker(this):o=!1;o&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(t){var i,a,n=e.datepicker._getInst(t.target);if(e.datepicker._get(n,"constrainInput"))return i=e.datepicker._possibleChars(e.datepicker._get(n,"dateFormat")),a=String.fromCharCode(null==t.charCode?t.keyCode:t.charCode),t.ctrlKey||t.metaKey||a<" "||!i||i.indexOf(a)>-1},_doKeyUp:function(t){var i,a=e.datepicker._getInst(t.target);if(a.input.val()!==a.lastVal)try{i=e.datepicker.parseDate(e.datepicker._get(a,"dateFormat"),a.input?a.input.val():null,e.datepicker._getFormatConfig(a)),i&&(e.datepicker._setDateFromField(a),e.datepicker._updateAlternate(a),e.datepicker._updateDatepicker(a))}catch(e){}return!0},_showDatepicker:function(t){if(t=t.target||t,"input"!==t.nodeName.toLowerCase()&&(t=e("input",t.parentNode)[0]),!e.datepicker._isDisabledDatepicker(t)&&e.datepicker._lastInput!==t){var i,n,s,o,l,c,d;i=e.datepicker._getInst(t),e.datepicker._curInst&&e.datepicker._curInst!==i&&(e.datepicker._curInst.dpDiv.stop(!0,!0),i&&e.datepicker._datepickerShowing&&e.datepicker._hideDatepicker(e.datepicker._curInst.input[0])),n=e.datepicker._get(i,"beforeShow"),s=n?n.apply(t,[t,i]):{},!1!==s&&(r(i.settings,s),i.lastVal=null,e.datepicker._lastInput=t,e.datepicker._setDateFromField(i),e.datepicker._inDialog&&(t.value=""),e.datepicker._pos||(e.datepicker._pos=e.datepicker._findPos(t),e.datepicker._pos[1]+=t.offsetHeight),o=!1,e(t).parents().each(function(){return!(o|="fixed"===e(this).css("position"))}),l={left:e.datepicker._pos[0],top:e.datepicker._pos[1]},e.datepicker._pos=null,i.dpDiv.empty(),i.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),e.datepicker._updateDatepicker(i),l=e.datepicker._checkOffset(i,l,o),i.dpDiv.css({position:e.datepicker._inDialog&&e.blockUI?"static":o?"fixed":"absolute",display:"none",left:l.left+"px",top:l.top+"px"}),i.inline||(c=e.datepicker._get(i,"showAnim"),d=e.datepicker._get(i,"duration"),i.dpDiv.css("z-index",a(e(t))+1),e.datepicker._datepickerShowing=!0,e.effects&&e.effects.effect[c]?i.dpDiv.show(c,e.datepicker._get(i,"showOptions"),d):i.dpDiv[c||"show"](c?d:null),e.datepicker._shouldFocusInput(i)&&i.input.focus(),e.datepicker._curInst=i))}},_updateDatepicker:function(t){this.maxRows=4,h=t,t.dpDiv.empty().append(this._generateHTML(t)),this._attachHandlers(t);var i,a=this._getNumberOfMonths(t),n=a[1],s=t.dpDiv.find("."+this._dayOverClass+" a");s.length>0&&o.apply(s.get(0)),t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),n>1&&t.dpDiv.addClass("ui-datepicker-multi-"+n).css("width",17*n+"em"),t.dpDiv[(1!==a[0]||1!==a[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),t===e.datepicker._curInst&&e.datepicker._datepickerShowing&&e.datepicker._shouldFocusInput(t)&&t.input.focus(),t.yearshtml&&(i=t.yearshtml,setTimeout(function(){i===t.yearshtml&&t.yearshtml&&t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml),i=t.yearshtml=null},0))},_shouldFocusInput:function(e){return e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&!e.input.is(":focus")},_checkOffset:function(t,i,a){var n=t.dpDiv.outerWidth(),s=t.dpDiv.outerHeight(),o=t.input?t.input.outerWidth():0,r=t.input?t.input.outerHeight():0,l=document.documentElement.clientWidth+(a?0:e(document).scrollLeft()),c=document.documentElement.clientHeight+(a?0:e(document).scrollTop());return i.left-=this._get(t,"isRTL")?n-o:0,i.left-=a&&i.left===t.input.offset().left?e(document).scrollLeft():0,i.top-=a&&i.top===t.input.offset().top+r?e(document).scrollTop():0,i.left-=Math.min(i.left,i.left+n>l&&l>n?Math.abs(i.left+n-l):0),i.top-=Math.min(i.top,i.top+s>c&&c>s?Math.abs(s+r):0),i},_findPos:function(t){for(var i,a=this._getInst(t),n=this._get(a,"isRTL");t&&("hidden"===t.type||1!==t.nodeType||e.expr.filters.hidden(t));)t=t[n?"previousSibling":"nextSibling"];return i=e(t).offset(),[i.left,i.top]},_hideDatepicker:function(t){var i,a,n,s,o=this._curInst;!o||t&&o!==e.data(t,"datepicker")||this._datepickerShowing&&(i=this._get(o,"showAnim"),a=this._get(o,"duration"),n=function(){e.datepicker._tidyDialog(o)},e.effects&&(e.effects.effect[i]||e.effects[i])?o.dpDiv.hide(i,e.datepicker._get(o,"showOptions"),a,n):o.dpDiv["slideDown"===i?"slideUp":"fadeIn"===i?"fadeOut":"hide"](i?a:null,n),i||n(),this._datepickerShowing=!1,s=this._get(o,"onClose"),s&&s.apply(o.input?o.input[0]:null,[o.input?o.input.val():"",o]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),e.blockUI&&(e.unblockUI(),e("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(t){if(e.datepicker._curInst){var i=e(t.target),a=e.datepicker._getInst(i[0]);(i[0].id===e.datepicker._mainDivId||0!==i.parents("#"+e.datepicker._mainDivId).length||i.hasClass(e.datepicker.markerClassName)||i.closest("."+e.datepicker._triggerClass).length||!e.datepicker._datepickerShowing||e.datepicker._inDialog&&e.blockUI)&&(!i.hasClass(e.datepicker.markerClassName)||e.datepicker._curInst===a)||e.datepicker._hideDatepicker()}},_adjustDate:function(t,i,a){var n=e(t),s=this._getInst(n[0]);this._isDisabledDatepicker(n[0])||(this._adjustInstDate(s,i+("M"===a?this._get(s,"showCurrentAtPos"):0),a),this._updateDatepicker(s))},_gotoToday:function(t){var i,a=e(t),n=this._getInst(a[0]);this._get(n,"gotoCurrent")&&n.currentDay?(n.selectedDay=n.currentDay,n.drawMonth=n.selectedMonth=n.currentMonth,n.drawYear=n.selectedYear=n.currentYear):(i=new Date,n.selectedDay=i.getDate(),n.drawMonth=n.selectedMonth=i.getMonth(),n.drawYear=n.selectedYear=i.getFullYear()),this._notifyChange(n),this._adjustDate(a)},_selectMonthYear:function(t,i,a){var n=e(t),s=this._getInst(n[0]);s["selected"+("M"===a?"Month":"Year")]=s["draw"+("M"===a?"Month":"Year")]=parseInt(i.options[i.selectedIndex].value,10),this._notifyChange(s),this._adjustDate(n)},_selectDay:function(t,i,a,n){var s,o=e(t);e(n).hasClass(this._unselectableClass)||this._isDisabledDatepicker(o[0])||(s=this._getInst(o[0]),s.selectedDay=s.currentDay=e("a",n).html(),s.selectedMonth=s.currentMonth=i,s.selectedYear=s.currentYear=a,this._selectDate(t,this._formatDate(s,s.currentDay,s.currentMonth,s.currentYear)))},_clearDate:function(t){var i=e(t);this._selectDate(i,"")},_selectDate:function(t,i){var a,n=e(t),s=this._getInst(n[0]);i=null!=i?i:this._formatDate(s),s.input&&s.input.val(i),this._updateAlternate(s),a=this._get(s,"onSelect"),a?a.apply(s.input?s.input[0]:null,[i,s]):s.input&&s.input.trigger("change"),s.inline?this._updateDatepicker(s):(this._hideDatepicker(),this._lastInput=s.input[0],"object"!=typeof s.input[0]&&s.input.focus(),this._lastInput=null)},_updateAlternate:function(t){var i,a,n,s=this._get(t,"altField");s&&(i=this._get(t,"altFormat")||this._get(t,"dateFormat"),a=this._getDate(t),n=this.formatDate(i,a,this._getFormatConfig(t)),e(s).each(function(){e(this).val(n)}))},noWeekends:function(e){var t=e.getDay();return[t>0&&t<6,""]},iso8601Week:function(e){var t,i=new Date(e.getTime());return i.setDate(i.getDate()+4-(i.getDay()||7)),t=i.getTime(),i.setMonth(0),i.setDate(1),Math.floor(Math.round((t-i)/864e5)/7)+1},parseDate:function(t,i,a){if(null==t||null==i)throw"Invalid arguments";if(""===(i="object"==typeof i?i.toString():i+""))return null;var n,s,o,r,l=0,c=(a?a.shortYearCutoff:null)||this._defaults.shortYearCutoff,d="string"!=typeof c?c:(new Date).getFullYear()%100+parseInt(c,10),h=(a?a.dayNamesShort:null)||this._defaults.dayNamesShort,u=(a?a.dayNames:null)||this._defaults.dayNames,p=(a?a.monthNamesShort:null)||this._defaults.monthNamesShort,f=(a?a.monthNames:null)||this._defaults.monthNames,g=-1,m=-1,v=-1,_=-1,b=!1,w=function(e){var i=n+1<t.length&&t.charAt(n+1)===e;return i&&n++,i},y=function(e){var t=w(e),a="@"===e?14:"!"===e?20:"y"===e&&t?4:"o"===e?3:2,n="y"===e?a:1,s=new RegExp("^\\d{"+n+","+a+"}"),o=i.substring(l).match(s);if(!o)throw"Missing number at position "+l;return l+=o[0].length,parseInt(o[0],10)},k=function(t,a,n){var s=-1,o=e.map(w(t)?n:a,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)});if(e.each(o,function(e,t){var a=t[1];if(i.substr(l,a.length).toLowerCase()===a.toLowerCase())return s=t[0],l+=a.length,!1}),-1!==s)return s+1;throw"Unknown name at position "+l},$=function(){if(i.charAt(l)!==t.charAt(n))throw"Unexpected literal at position "+l;l++};for(n=0;n<t.length;n++)if(b)"'"!==t.charAt(n)||w("'")?$():b=!1;else switch(t.charAt(n)){case"d":v=y("d");break;case"D":k("D",h,u);break;case"o":_=y("o");break;case"m":m=y("m");break;case"M":m=k("M",p,f);break;case"y":g=y("y");break;case"@":r=new Date(y("@")),g=r.getFullYear(),m=r.getMonth()+1,v=r.getDate();break;case"!":r=new Date((y("!")-this._ticksTo1970)/1e4),g=r.getFullYear(),m=r.getMonth()+1,v=r.getDate();break;case"'":w("'")?$():b=!0;break;default:$()}if(l<i.length&&(o=i.substr(l),!/^\s+/.test(o)))throw"Extra/unparsed characters found in date: "+o;if(-1===g?g=(new Date).getFullYear():g<100&&(g+=(new Date).getFullYear()-(new Date).getFullYear()%100+(g<=d?0:-100)),_>-1)for(m=1,v=_;;){if(s=this._getDaysInMonth(g,m-1),v<=s)break;m++,v-=s}if(r=this._daylightSavingAdjust(new Date(g,m-1,v)),r.getFullYear()!==g||r.getMonth()+1!==m||r.getDate()!==v)throw"Invalid date";return r},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(e,t,i){if(!t)return"";var a,n=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,s=(i?i.dayNames:null)||this._defaults.dayNames,o=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,r=(i?i.monthNames:null)||this._defaults.monthNames,l=function(t){var i=a+1<e.length&&e.charAt(a+1)===t;return i&&a++,i},c=function(e,t,i){var a=""+t;if(l(e))for(;a.length<i;)a="0"+a;return a},d=function(e,t,i,a){return l(e)?a[t]:i[t]},h="",u=!1;if(t)for(a=0;a<e.length;a++)if(u)"'"!==e.charAt(a)||l("'")?h+=e.charAt(a):u=!1;else switch(e.charAt(a)){case"d":h+=c("d",t.getDate(),2);break;case"D":h+=d("D",t.getDay(),n,s);break;case"o":h+=c("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":h+=c("m",t.getMonth()+1,2);break;case"M":h+=d("M",t.getMonth(),o,r);break;case"y":h+=l("y")?t.getFullYear():(t.getYear()%100<10?"0":"")+t.getYear()%100;break;case"@":h+=t.getTime();break;case"!":h+=1e4*t.getTime()+this._ticksTo1970;break;case"'":l("'")?h+="'":u=!0;break;default:h+=e.charAt(a)}return h},_possibleChars:function(e){var t,i="",a=!1,n=function(i){var a=t+1<e.length&&e.charAt(t+1)===i;return a&&t++,a};for(t=0;t<e.length;t++)if(a)"'"!==e.charAt(t)||n("'")?i+=e.charAt(t):a=!1;else switch(e.charAt(t)){case"d":case"m":case"y":case"@":i+="0123456789";break;case"D":case"M":return null;case"'":n("'")?i+="'":a=!0;break;default:i+=e.charAt(t)}return i},_get:function(e,t){return void 0!==e.settings[t]?e.settings[t]:this._defaults[t]},_setDateFromField:function(e,t){if(e.input.val()!==e.lastVal){var i=this._get(e,"dateFormat"),a=e.lastVal=e.input?e.input.val():null,n=this._getDefaultDate(e),s=n,o=this._getFormatConfig(e);try{s=this.parseDate(i,a,o)||n}catch(e){a=t?"":a}e.selectedDay=s.getDate(),e.drawMonth=e.selectedMonth=s.getMonth(),e.drawYear=e.selectedYear=s.getFullYear(),e.currentDay=a?s.getDate():0,e.currentMonth=a?s.getMonth():0,e.currentYear=a?s.getFullYear():0,this._adjustInstDate(e)}},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(t,i,a){var n=null==i||""===i?a:"string"==typeof i?function(i){try{return e.datepicker.parseDate(e.datepicker._get(t,"dateFormat"),i,e.datepicker._getFormatConfig(t))}catch(e){}for(var a=(i.toLowerCase().match(/^c/)?e.datepicker._getDate(t):null)||new Date,n=a.getFullYear(),s=a.getMonth(),o=a.getDate(),r=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,l=r.exec(i);l;){switch(l[2]||"d"){case"d":case"D":o+=parseInt(l[1],10);break;case"w":case"W":o+=7*parseInt(l[1],10);break;case"m":case"M":s+=parseInt(l[1],10),o=Math.min(o,e.datepicker._getDaysInMonth(n,s));break;case"y":case"Y":n+=parseInt(l[1],10),o=Math.min(o,e.datepicker._getDaysInMonth(n,s))}l=r.exec(i)}return new Date(n,s,o)}(i):"number"==typeof i?isNaN(i)?a:function(e){var t=new Date;return t.setDate(t.getDate()+e),t}(i):new Date(i.getTime());return n=n&&"Invalid Date"===n.toString()?a:n,n&&(n.setHours(0),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0)),this._daylightSavingAdjust(n)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,i){var a=!t,n=e.selectedMonth,s=e.selectedYear,o=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=o.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=o.getMonth(),e.drawYear=e.selectedYear=e.currentYear=o.getFullYear(),n===e.selectedMonth&&s===e.selectedYear||i||this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(a?"":this._formatDate(e))},_getDate:function(e){return!e.currentYear||e.input&&""===e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay))},_attachHandlers:function(t){var i=this._get(t,"stepMonths"),a="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var t={prev:function(){e.datepicker._adjustDate(a,-i,"M")},next:function(){e.datepicker._adjustDate(a,+i,"M")},hide:function(){e.datepicker._hideDatepicker()},today:function(){e.datepicker._gotoToday(a)},selectDay:function(){return e.datepicker._selectDay(a,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return e.datepicker._selectMonthYear(a,this,"M"),!1},selectYear:function(){return e.datepicker._selectMonthYear(a,this,"Y"),!1}};e(this).bind(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t,i,a,n,s,o,r,l,c,d,h,u,p,f,g,m,v,_,b,w,y,k,$,D,x,C,T,M,S,E,j,I,N,O,F,P,L,A,Y,q=new Date,z=this._daylightSavingAdjust(new Date(q.getFullYear(),q.getMonth(),q.getDate())),W=this._get(e,"isRTL"),R=this._get(e,"showButtonPanel"),B=this._get(e,"hideIfNoPrevNext"),V=this._get(e,"navigationAsDateFormat"),H=this._getNumberOfMonths(e),X=this._get(e,"showCurrentAtPos"),K=this._get(e,"stepMonths"),U=1!==H[0]||1!==H[1],G=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),Q=this._getMinMaxDate(e,"min"),J=this._getMinMaxDate(e,"max"),Z=e.drawMonth-X,ee=e.drawYear;if(Z<0&&(Z+=12,ee--),J)for(t=this._daylightSavingAdjust(new Date(J.getFullYear(),J.getMonth()-H[0]*H[1]+1,J.getDate())),t=Q&&t<Q?Q:t;this._daylightSavingAdjust(new Date(ee,Z,1))>t;)--Z<0&&(Z=11,ee--);for(e.drawMonth=Z,e.drawYear=ee,i=this._get(e,"prevText"),i=V?this.formatDate(i,this._daylightSavingAdjust(new Date(ee,Z-K,1)),this._getFormatConfig(e)):i,a=this._canAdjustMonth(e,-1,ee,Z)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(W?"e":"w")+"'>"+i+"</span></a>":B?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(W?"e":"w")+"'>"+i+"</span></a>",n=this._get(e,"nextText"),n=V?this.formatDate(n,this._daylightSavingAdjust(new Date(ee,Z+K,1)),this._getFormatConfig(e)):n,s=this._canAdjustMonth(e,1,ee,Z)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(W?"w":"e")+"'>"+n+"</span></a>":B?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(W?"w":"e")+"'>"+n+"</span></a>",o=this._get(e,"currentText"),r=this._get(e,"gotoCurrent")&&e.currentDay?G:z,o=V?this.formatDate(o,r,this._getFormatConfig(e)):o,l=e.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(e,"closeText")+"</button>",c=R?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(W?l:"")+(this._isInRange(e,r)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+o+"</button>":"")+(W?"":l)+"</div>":"",d=parseInt(this._get(e,"firstDay"),10),d=isNaN(d)?0:d,h=this._get(e,"showWeek"),u=this._get(e,"dayNames"),p=this._get(e,"dayNamesMin"),f=this._get(e,"monthNames"),g=this._get(e,"monthNamesShort"),m=this._get(e,"beforeShowDay"),v=this._get(e,"showOtherMonths"),_=this._get(e,"selectOtherMonths"),b=this._getDefaultDate(e),w="",k=0;k<H[0];k++){for($="",this.maxRows=4,D=0;D<H[1];D++){if(x=this._daylightSavingAdjust(new Date(ee,Z,e.selectedDay)),C=" ui-corner-all",T="",U){if(T+="<div class='ui-datepicker-group",H[1]>1)switch(D){case 0:T+=" ui-datepicker-group-first",C=" ui-corner-"+(W?"right":"left");break;case H[1]-1:T+=" ui-datepicker-group-last",C=" ui-corner-"+(W?"left":"right");break;default:T+=" ui-datepicker-group-middle",C=""}T+="'>"}for(T+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+C+"'>"+(/all|left/.test(C)&&0===k?W?s:a:"")+(/all|right/.test(C)&&0===k?W?a:s:"")+this._generateMonthYearHeader(e,Z,ee,Q,J,k>0||D>0,f,g)+"</div><table class='ui-datepicker-calendar'><thead><tr>",M=h?"<th class='ui-datepicker-week-col'>"+this._get(e,"weekHeader")+"</th>":"",y=0;y<7;y++)S=(y+d)%7,M+="<th scope='col'"+((y+d+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+u[S]+"'>"+p[S]+"</span></th>";for(T+=M+"</tr></thead><tbody>",E=this._getDaysInMonth(ee,Z),ee===e.selectedYear&&Z===e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,E)),j=(this._getFirstDayOfMonth(ee,Z)-d+7)%7,I=Math.ceil((j+E)/7),N=U&&this.maxRows>I?this.maxRows:I,this.maxRows=N,O=this._daylightSavingAdjust(new Date(ee,Z,1-j)),F=0;F<N;F++){for(T+="<tr>",P=h?"<td class='ui-datepicker-week-col'>"+this._get(e,"calculateWeek")(O)+"</td>":"",y=0;y<7;y++)L=m?m.apply(e.input?e.input[0]:null,[O]):[!0,""],A=O.getMonth()!==Z,Y=A&&!_||!L[0]||Q&&O<Q||J&&O>J,P+="<td class='"+((y+d+6)%7>=5?" ui-datepicker-week-end":"")+(A?" ui-datepicker-other-month":"")+(O.getTime()===x.getTime()&&Z===e.selectedMonth&&e._keyEvent||b.getTime()===O.getTime()&&b.getTime()===x.getTime()?" "+this._dayOverClass:"")+(Y?" "+this._unselectableClass+" ui-state-disabled":"")+(A&&!v?"":" "+L[1]+(O.getTime()===G.getTime()?" "+this._currentClass:"")+(O.getTime()===z.getTime()?" ui-datepicker-today":""))+"'"+(A&&!v||!L[2]?"":" title='"+L[2].replace(/'/g,"&#39;")+"'")+(Y?"":" data-handler='selectDay' data-event='click' data-month='"+O.getMonth()+"' data-year='"+O.getFullYear()+"'")+">"+(A&&!v?"&#xa0;":Y?"<span class='ui-state-default'>"+O.getDate()+"</span>":"<a class='ui-state-default"+(O.getTime()===z.getTime()?" ui-state-highlight":"")+(O.getTime()===G.getTime()?" ui-state-active":"")+(A?" ui-priority-secondary":"")+"' href='#'>"+O.getDate()+"</a>")+"</td>",O.setDate(O.getDate()+1),O=this._daylightSavingAdjust(O);T+=P+"</tr>"}Z++,Z>11&&(Z=0,ee++),T+="</tbody></table>"+(U?"</div>"+(H[0]>0&&D===H[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),$+=T}w+=$}return w+=c,e._keyEvent=!1,w},_generateMonthYearHeader:function(e,t,i,a,n,s,o,r){var l,c,d,h,u,p,f,g,m=this._get(e,"changeMonth"),v=this._get(e,"changeYear"),_=this._get(e,"showMonthAfterYear"),b="<div class='ui-datepicker-title'>",w="";if(s||!m)w+="<span class='ui-datepicker-month'>"+o[t]+"</span>";else{for(l=a&&a.getFullYear()===i,c=n&&n.getFullYear()===i,w+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",d=0;d<12;d++)(!l||d>=a.getMonth())&&(!c||d<=n.getMonth())&&(w+="<option value='"+d+"'"+(d===t?" selected='selected'":"")+">"+r[d]+"</option>");w+="</select>"}if(_||(b+=w+(!s&&m&&v?"":"&#xa0;")),!e.yearshtml)if(e.yearshtml="",s||!v)b+="<span class='ui-datepicker-year'>"+i+"</span>";else{for(h=this._get(e,"yearRange").split(":"),u=(new Date).getFullYear(),p=function(e){var t=e.match(/c[+\-].*/)?i+parseInt(e.substring(1),10):e.match(/[+\-].*/)?u+parseInt(e,10):parseInt(e,10);return isNaN(t)?u:t},f=p(h[0]),g=Math.max(f,p(h[1]||"")),f=a?Math.max(f,a.getFullYear()):f,g=n?Math.min(g,n.getFullYear()):g,e.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";f<=g;f++)e.yearshtml+="<option value='"+f+"'"+(f===i?" selected='selected'":"")+">"+f+"</option>";e.yearshtml+="</select>",b+=e.yearshtml,e.yearshtml=null}return b+=this._get(e,"yearSuffix"),_&&(b+=(!s&&m&&v?"":"&#xa0;")+w),b+="</div>"},_adjustInstDate:function(e,t,i){var a=e.drawYear+("Y"===i?t:0),n=e.drawMonth+("M"===i?t:0),s=Math.min(e.selectedDay,this._getDaysInMonth(a,n))+("D"===i?t:0),o=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(a,n,s)));e.selectedDay=o.getDate(),e.drawMonth=e.selectedMonth=o.getMonth(),e.drawYear=e.selectedYear=o.getFullYear(),"M"!==i&&"Y"!==i||this._notifyChange(e)},_restrictMinMax:function(e,t){var i=this._getMinMaxDate(e,"min"),a=this._getMinMaxDate(e,"max"),n=i&&t<i?i:t;return a&&n>a?a:n},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,i,a){var n=this._getNumberOfMonths(e),s=this._daylightSavingAdjust(new Date(i,a+(t<0?t:n[0]*n[1]),1));return t<0&&s.setDate(this._getDaysInMonth(s.getFullYear(),s.getMonth())),this._isInRange(e,s)},_isInRange:function(e,t){var i,a,n=this._getMinMaxDate(e,"min"),s=this._getMinMaxDate(e,"max"),o=null,r=null,l=this._get(e,"yearRange");return l&&(i=l.split(":"),a=(new Date).getFullYear(),o=parseInt(i[0],10),r=parseInt(i[1],10),i[0].match(/[+\-].*/)&&(o+=a),i[1].match(/[+\-].*/)&&(r+=a)),(!n||t.getTime()>=n.getTime())&&(!s||t.getTime()<=s.getTime())&&(!o||t.getFullYear()>=o)&&(!r||t.getFullYear()<=r)},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,i,a){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var n=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(a,i,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),n,this._getFormatConfig(e))}}),e.fn.datepicker=function(t){if(!this.length)return this;e.datepicker.initialized||(e(document).mousedown(e.datepicker._checkExternalClick),e.datepicker.initialized=!0),0===e("#"+e.datepicker._mainDivId).length&&e("body").append(e.datepicker.dpDiv);var i=Array.prototype.slice.call(arguments,1);return"string"!=typeof t||"isDisabled"!==t&&"getDate"!==t&&"widget"!==t?"option"===t&&2===arguments.length&&"string"==typeof arguments[1]?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(i)):this.each(function(){"string"==typeof t?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this].concat(i)):e.datepicker._attachDatepicker(this,t)}):e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(i))},e.datepicker=new n,e.datepicker.initialized=!1,e.datepicker.uuid=(new Date).getTime(),e.datepicker.version="1.11.4";e.datepicker,e.widget("ui.slider",e.ui.mouse,{version:"1.11.4",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var t,i,a=this.options,n=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),s=[];for(i=a.values&&a.values.length||1,n.length>i&&(n.slice(i).remove(),n=n.slice(0,i)),t=n.length;t<i;t++)s.push("<span class='ui-slider-handle ui-state-default ui-corner-all' tabindex='0'></span>");this.handles=n.add(e(s.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(t){e(this).data("ui-slider-handle-index",t)})},_createRange:function(){var t=this.options,i="";t.range?(!0===t.range&&(t.values?t.values.length&&2!==t.values.length?t.values=[t.values[0],t.values[0]]:e.isArray(t.values)&&(t.values=t.values.slice(0)):t.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=e("<div></div>").appendTo(this.element),i="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(i+("min"===t.range||"max"===t.range?" ui-slider-range-"+t.range:""))):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(t){var i,a,n,s,o,r,l,c=this,d=this.options;return!d.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:t.pageX,y:t.pageY},a=this._normValueFromMouse(i),n=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var i=Math.abs(a-c.values(t));(n>i||n===i&&(t===c._lastChangedValue||c.values(t)===d.min))&&(n=i,s=e(this),o=t)}),!1!==this._start(t,o)&&(this._mouseSliding=!0,this._handleIndex=o,s.addClass("ui-state-active").focus(),r=s.offset(),l=!e(t.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=l?{left:0,top:0}:{left:t.pageX-r.left-s.width()/2,top:t.pageY-r.top-s.height()/2-(parseInt(s.css("borderTopWidth"),10)||0)-(parseInt(s.css("borderBottomWidth"),10)||0)+(parseInt(s.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,o,a),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},i=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,i),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,i,a,n,s;return"horizontal"===this.orientation?(t=this.elementSize.width,i=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,
i=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),a=i/t,a>1&&(a=1),a<0&&(a=0),"vertical"===this.orientation&&(a=1-a),n=this._valueMax()-this._valueMin(),s=this._valueMin()+a*n,this._trimAlignValue(s)},_start:function(e,t){var i={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("start",e,i)},_slide:function(e,t,i){var a,n,s;this.options.values&&this.options.values.length?(a=this.values(t?0:1),2===this.options.values.length&&!0===this.options.range&&(0===t&&i>a||1===t&&i<a)&&(i=a),i!==this.values(t)&&(n=this.values(),n[t]=i,s=this._trigger("slide",e,{handle:this.handles[t],value:i,values:n}),a=this.values(t?0:1),!1!==s&&this.values(t,i))):i!==this.value()&&!1!==(s=this._trigger("slide",e,{handle:this.handles[t],value:i}))&&this.value(i)},_stop:function(e,t){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("stop",e,i)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._lastChangedValue=t,this._trigger("change",e,i)}},value:function(e){return arguments.length?(this.options.value=this._trimAlignValue(e),this._refreshValue(),void this._change(null,0)):this._value()},values:function(t,i){var a,n,s;if(arguments.length>1)return this.options.values[t]=this._trimAlignValue(i),this._refreshValue(),void this._change(null,t);if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();for(a=this.options.values,n=arguments[0],s=0;s<a.length;s+=1)a[s]=this._trimAlignValue(n[s]),this._change(null,s);this._refreshValue()},_setOption:function(t,i){var a,n=0;switch("range"===t&&!0===this.options.range&&("min"===i?(this.options.value=this._values(0),this.options.values=null):"max"===i&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),e.isArray(this.options.values)&&(n=this.options.values.length),"disabled"===t&&this.element.toggleClass("ui-state-disabled",!!i),this._super(t,i),t){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue(),this.handles.css("horizontal"===i?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),a=0;a<n;a+=1)this._change(null,a);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e)},_values:function(e){var t,i,a;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t);if(this.options.values&&this.options.values.length){for(i=this.options.values.slice(),a=0;a<i.length;a+=1)i[a]=this._trimAlignValue(i[a]);return i}return[]},_trimAlignValue:function(e){if(e<=this._valueMin())return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,i=(e-this._valueMin())%t,a=e-i;return 2*Math.abs(i)>=t&&(a+=i>0?t:-t),parseFloat(a.toFixed(5))},_calculateNewMax:function(){var e=this.options.max,t=this._valueMin(),i=this.options.step;e=Math.floor(+(e-t).toFixed(this._precision())/i)*i+t,this.max=parseFloat(e.toFixed(this._precision()))},_precision:function(){var e=this._precisionOf(this.options.step);return null!==this.options.min&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=e.toString(),i=t.indexOf(".");return-1===i?0:t.length-i-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshValue:function(){var t,i,a,n,s,o=this.options.range,r=this.options,l=this,c=!this._animateOff&&r.animate,d={};this.options.values&&this.options.values.length?this.handles.each(function(a){i=(l.values(a)-l._valueMin())/(l._valueMax()-l._valueMin())*100,d["horizontal"===l.orientation?"left":"bottom"]=i+"%",e(this).stop(1,1)[c?"animate":"css"](d,r.animate),!0===l.options.range&&("horizontal"===l.orientation?(0===a&&l.range.stop(1,1)[c?"animate":"css"]({left:i+"%"},r.animate),1===a&&l.range[c?"animate":"css"]({width:i-t+"%"},{queue:!1,duration:r.animate})):(0===a&&l.range.stop(1,1)[c?"animate":"css"]({bottom:i+"%"},r.animate),1===a&&l.range[c?"animate":"css"]({height:i-t+"%"},{queue:!1,duration:r.animate}))),t=i}):(a=this.value(),n=this._valueMin(),s=this._valueMax(),i=s!==n?(a-n)/(s-n)*100:0,d["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[c?"animate":"css"](d,r.animate),"min"===o&&"horizontal"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({width:i+"%"},r.animate),"max"===o&&"horizontal"===this.orientation&&this.range[c?"animate":"css"]({width:100-i+"%"},{queue:!1,duration:r.animate}),"min"===o&&"vertical"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({height:i+"%"},r.animate),"max"===o&&"vertical"===this.orientation&&this.range[c?"animate":"css"]({height:100-i+"%"},{queue:!1,duration:r.animate}))},_handleEvents:{keydown:function(t){var i,a,n,s=e(t.target).data("ui-slider-handle-index");switch(t.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(t.preventDefault(),!this._keySliding&&(this._keySliding=!0,e(t.target).addClass("ui-state-active"),!1===this._start(t,s)))return}switch(n=this.options.step,i=a=this.options.values&&this.options.values.length?this.values(s):this.value(),t.keyCode){case e.ui.keyCode.HOME:a=this._valueMin();break;case e.ui.keyCode.END:a=this._valueMax();break;case e.ui.keyCode.PAGE_UP:a=this._trimAlignValue(i+(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.PAGE_DOWN:a=this._trimAlignValue(i-(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(i===this._valueMax())return;a=this._trimAlignValue(i+n);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(i===this._valueMin())return;a=this._trimAlignValue(i-n)}this._slide(t,s,a)},keyup:function(t){var i=e(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,i),this._change(t,i),e(t.target).removeClass("ui-state-active"))}}})}),function(e){function t(t,i){var a,n,s,o;if(i.__bemMeta&&i.__bemMeta.block==t)return i.__bemMeta.elem;for(o=new RegExp("^"+t+"__("+r+")$","i"),a=(i.attr("class")||"").split(" "),n=0;n<a.length;n++)if(s=e.trim(a[n]).match(o))return s[1];return!1}function i(t,i){var a,n,s,o,l={};for(s=new RegExp("^"+i+"_("+r+")(?=_("+r+")$|$)","i"),a=(t.attr("class")||"").split(" "),n=0;n<a.length;n++)(o=e.trim(a[n]).match(s))&&(l[o[1]]=o[2]||null);return l}var a=jQuery.Widget;a.prototype._proxy=function(t){return e.proxy(t,this)},a.prototype._log=function(){var e;return void 0!==window.console&&void 0!==console.log.apply&&(e=[this.widgetName+":",this.element,this],e=e.concat(Array.prototype.slice.call(arguments,0)),console.log.apply(console,e)),this},a.prototype._errorLog=function(){var e;return void 0!==window.console&&void 0!==console.log.error&&(e=[this.widgetName+":",this.element,this],e=e.concat(Array.prototype.slice.call(arguments,0)),console.error.apply(console,e)),this},void 0===a.prototype._delay&&(a.prototype._delay=function(t,i){return setTimeout(e.proxy(t,this),i||0)}),a.prototype._avoidEvent=function(t,i,a,n){function s(){r._on(n,l)}function o(){r._off(n,t)}var r=this,l={},c={};a=a||this.element,n=n||e("body"),l[t]=i,c[t]=function(){o(),setTimeout(function(){s()},0)},this._on(a,c),s()};var n=function(e,t){return e+"__"+t},s=function(e,t,i){return e+"_"+t+(i?"_"+i:"")},o=function(e,t,i,a){return s(n(e,t),i,a)},r="[a-z0-9-]+";a.prototype._getBlockName=function(){return this.widgetName.split("_")[0]},a.prototype._elem=function(e,t,i,a){this.widgetName=this.widgetName.split("_")[0];var o,r;return"string"==typeof e&&(a=i,i=t,t=e,e=this.element),o=n(this.widgetName,t),i&&(o=s(o,i,a)),r=e.find("."+o),r.__bemMeta={elem:function(e){return e.split(":")[0]}(t),block:this.widgetName},r},a.prototype._getElemClass=function(e){return n(this.widgetName,e)},a.prototype._getModClass=function(e,t){return s(this.widgetName,e,t)},a.prototype._getModElemClass=function(e,t,i){return o(this.widgetName,e,t,i)},a.prototype._setMod=function(e,i,a){var o,r;if("string"==typeof e)a=i,i=e,e=this.element,o=this.widgetName,this._delMod(i);else{if(!(r=t(this.widgetName,e)))return this;o=n(this.widgetName,r),this._delMod(e,i)}return a||(a=null),e.addClass(s(o,i,a)),this},a.prototype._delMod=function(e,a){var o,r,l,c;if("string"==typeof e)a=e,e=this.element,o=this.widgetName;else{if(!(r=t(this.widgetName,e)))return this;o=n(this.widgetName,r)}return l=i(e,o),c=s(o,a,l[a]),e.removeClass(c),this},a.prototype._hasMod=function(e,t,i){var a=!1;return"string"==typeof e&&(i=t,t=e,e=this.element,a=!0),void 0===i&&(i=null),a?this._getMod(t)===i:this._getMod(e,t)===i},a.prototype._getMod=function(e,a){var s,o;if("string"==typeof e)a=e,e=this.element,s=this.widgetName;else{if(!(o=t(this.widgetName,e)))return!1;s=n(this.widgetName,o)}return i(e,s)[a]},a.prototype._getModHash=function(e){var a,s;return"object"!=typeof e?(e=this.element,a=this.widgetName):(s=t(this.widgetName,e),a=n(this.widgetName,s)),i(e,a)},a.prototype._toggleMod=function(e,t){var i=Array.prototype.slice.call(arguments);this._hasMod.apply(this,i)?this._delMod.apply(this,i):this._setMod.apply(this,i)},a.prototype._findBlock=function(e,t,i){"string"!=typeof t&&(i=t,t=e,e=this.element);var a,n="[data-block="+t+"]",s="."+t,o=s+","+n;return a=e.filter(o),i||(a=a.add(e.find(o))),a},a.prototype._listen=function(e,t,i,a){return"string"==typeof e&&(a=i,i=t,t=e,e=this.element),"string"!=typeof i&&(i=i.selector),e.on(t,i,this._proxy(a)),this},a.prototype._elemSelector=function(e){return"."+this._getElemClass(e)},a.prototype._modSelector=function(e,t){return"."+this._getElemClass(e)+"_"+t},a.prototype._setBlockMod=function(e){this.element.addClass(this._getBlockName()+"_"+e)},a.prototype._delBlockMod=function(e){this.element.removeClass(this._getBlockName()+"_"+e)}}(jQuery),function(e,t,i,a){function n(t,i){this.element=t,this.options=e.extend({},o,i),this._defaults=o,this._name=s,this.init()}var s="stellar",o={scrollProperty:"scroll",positionProperty:"position",horizontalScrolling:!0,verticalScrolling:!0,horizontalOffset:0,verticalOffset:0,responsive:!1,parallaxBackgrounds:!0,parallaxElements:!0,hideDistantElements:!0,hideElement:function(e){e.hide()},showElement:function(e){e.show()}},r={scroll:{getLeft:function(e){return e.scrollLeft()},setLeft:function(e,t){e.scrollLeft(t)},getTop:function(e){return e.scrollTop()},setTop:function(e,t){e.scrollTop(t)}},position:{getLeft:function(e){return-1*parseInt(e.css("left"),10)},getTop:function(e){return-1*parseInt(e.css("top"),10)}},margin:{getLeft:function(e){return-1*parseInt(e.css("margin-left"),10)},getTop:function(e){return-1*parseInt(e.css("margin-top"),10)}},transform:{getLeft:function(e){var t=getComputedStyle(e[0])[d];return"none"!==t?-1*parseInt(t.match(/(-?[0-9]+)/g)[4],10):0},getTop:function(e){var t=getComputedStyle(e[0])[d];return"none"!==t?-1*parseInt(t.match(/(-?[0-9]+)/g)[5],10):0}}},l={position:{setLeft:function(e,t){e.css("left",t)},setTop:function(e,t){e.css("top",t)}},transform:{setPosition:function(e,t,i,a,n){e[0].style[d]="translate3d("+(t-i)+"px, "+(a-n)+"px, 0)"}}},c=function(){var t,i=/^(Moz|Webkit|Khtml|O|ms|Icab)(?=[A-Z])/,a=e("script")[0].style,n="";for(t in a)if(i.test(t)){n=t.match(i)[0];break}return"WebkitOpacity"in a&&(n="Webkit"),"KhtmlOpacity"in a&&(n="Khtml"),function(e){return n+(n.length>0?e.charAt(0).toUpperCase()+e.slice(1):e)}}(),d=c("transform"),h=e("<div />",{style:"background:#fff"}).css("background-position-x")!==a,u=h?function(e,t,i){e.css({"background-position-x":t,"background-position-y":i})}:function(e,t,i){e.css("background-position",t+" "+i)},p=h?function(e){return[e.css("background-position-x"),e.css("background-position-y")]}:function(e){return e.css("background-position").split(" ")},f=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||t.msRequestAnimationFrame||function(e){setTimeout(e,1e3/60)};n.prototype={init:function(){this.options.name=s+"_"+Math.floor(1e9*Math.random()),this._defineElements(),this._defineGetters(),this._defineSetters(),this._handleWindowLoadAndResize(),this._detectViewport(),this.refresh({firstLoad:!0}),"scroll"===this.options.scrollProperty?this._handleScrollEvent():this._startAnimationLoop()},_defineElements:function(){this.element===i.body&&(this.element=t),this.$scrollElement=e(this.element),this.$element=this.element===t?e("body"):this.$scrollElement,this.$viewportElement=this.options.viewportElement!==a?e(this.options.viewportElement):this.$scrollElement[0]===t||"scroll"===this.options.scrollProperty?this.$scrollElement:this.$scrollElement.parent()},_defineGetters:function(){var e=this,t=r[e.options.scrollProperty];this._getScrollLeft=function(){return t.getLeft(e.$scrollElement)},this._getScrollTop=function(){return t.getTop(e.$scrollElement)}},_defineSetters:function(){var t=this,i=r[t.options.scrollProperty],a=l[t.options.positionProperty],n=i.setLeft,s=i.setTop;this._setScrollLeft="function"==typeof n?function(e){n(t.$scrollElement,e)}:e.noop,this._setScrollTop="function"==typeof s?function(e){s(t.$scrollElement,e)}:e.noop,this._setPosition=a.setPosition||function(e,i,n,s,o){t.options.horizontalScrolling&&a.setLeft(e,i,n),t.options.verticalScrolling&&a.setTop(e,s,o)}},_handleWindowLoadAndResize:function(){var i=this,a=e(t);i.options.responsive&&a.bind("load."+this.name,function(){i.refresh()}),a.bind("resize."+this.name,function(){i._detectViewport(),i.options.responsive&&i.refresh()})},refresh:function(i){var a=this,n=a._getScrollLeft(),s=a._getScrollTop();i&&i.firstLoad||this._reset(),this._setScrollLeft(0),this._setScrollTop(0),this._setOffsets(),this._findParticles(),this._findBackgrounds(),i&&i.firstLoad&&/WebKit/.test(navigator.userAgent)&&e(t).load(function(){var e=a._getScrollLeft(),t=a._getScrollTop();a._setScrollLeft(e+1),a._setScrollTop(t+1),a._setScrollLeft(e),a._setScrollTop(t)}),this._setScrollLeft(n),this._setScrollTop(s)},_detectViewport:function(){var e=this.$viewportElement.offset(),t=null!==e&&e!==a;this.viewportWidth=this.$viewportElement.width(),this.viewportHeight=this.$viewportElement.height(),this.viewportOffsetTop=t?e.top:0,this.viewportOffsetLeft=t?e.left:0},_findParticles:function(){var t=this;if(this._getScrollLeft(),this._getScrollTop(),this.particles!==a)for(var i=this.particles.length-1;i>=0;i--)this.particles[i].$element.data("stellar-elementIsActive",a);this.particles=[],this.options.parallaxElements&&this.$element.find("[data-stellar-ratio]").each(function(){var i,n,s,o,r,l,c,d,h,u=e(this),p=0,f=0,g=0,m=0;if(u.data("stellar-elementIsActive")){if(u.data("stellar-elementIsActive")!==this)return}else u.data("stellar-elementIsActive",this);t.options.showElement(u),u.data("stellar-startingLeft")?(u.css("left",u.data("stellar-startingLeft")),u.css("top",u.data("stellar-startingTop"))):(u.data("stellar-startingLeft",u.css("left")),u.data("stellar-startingTop",u.css("top"))),s=u.position().left,o=u.position().top,r="auto"===u.css("margin-left")?0:parseInt(u.css("margin-left"),10),l="auto"===u.css("margin-top")?0:parseInt(u.css("margin-top"),10),d=u.offset().left-r,h=u.offset().top-l,u.parents().each(function(){var t=e(this);return!0===t.data("stellar-offset-parent")?(p=g,f=m,c=t,!1):(g+=t.position().left,void(m+=t.position().top))}),i=u.data("stellar-horizontal-offset")!==a?u.data("stellar-horizontal-offset"):c!==a&&c.data("stellar-horizontal-offset")!==a?c.data("stellar-horizontal-offset"):t.horizontalOffset,n=u.data("stellar-vertical-offset")!==a?u.data("stellar-vertical-offset"):c!==a&&c.data("stellar-vertical-offset")!==a?c.data("stellar-vertical-offset"):t.verticalOffset,t.particles.push({$element:u,$offsetParent:c,isFixed:"fixed"===u.css("position"),horizontalOffset:i,verticalOffset:n,startingPositionLeft:s,startingPositionTop:o,startingOffsetLeft:d,startingOffsetTop:h,parentOffsetLeft:p,parentOffsetTop:f,stellarRatio:u.data("stellar-ratio")!==a?u.data("stellar-ratio"):1,width:u.outerWidth(!0),height:u.outerHeight(!0),isHidden:!1})})},_findBackgrounds:function(){var t,i=this,n=this._getScrollLeft(),s=this._getScrollTop();this.backgrounds=[],this.options.parallaxBackgrounds&&(t=this.$element.find("[data-stellar-background-ratio]"),this.$element.data("stellar-background-ratio")&&(t=t.add(this.$element)),t.each(function(){var t,o,r,l,c,d,h,f=e(this),g=p(f),m=0,v=0,_=0,b=0;if(f.data("stellar-backgroundIsActive")){if(f.data("stellar-backgroundIsActive")!==this)return}else f.data("stellar-backgroundIsActive",this);f.data("stellar-backgroundStartingLeft")?u(f,f.data("stellar-backgroundStartingLeft"),f.data("stellar-backgroundStartingTop")):(f.data("stellar-backgroundStartingLeft",g[0]),f.data("stellar-backgroundStartingTop",g[1])),r="auto"===f.css("margin-left")?0:parseInt(f.css("margin-left"),10),l="auto"===f.css("margin-top")?0:parseInt(f.css("margin-top"),10),c=f.offset().left-r-n,d=f.offset().top-l-s,f.parents().each(function(){var t=e(this);return!0===t.data("stellar-offset-parent")?(m=_,v=b,h=t,!1):(_+=t.position().left,void(b+=t.position().top))}),t=f.data("stellar-horizontal-offset")!==a?f.data("stellar-horizontal-offset"):h!==a&&h.data("stellar-horizontal-offset")!==a?h.data("stellar-horizontal-offset"):i.horizontalOffset,o=f.data("stellar-vertical-offset")!==a?f.data("stellar-vertical-offset"):h!==a&&h.data("stellar-vertical-offset")!==a?h.data("stellar-vertical-offset"):i.verticalOffset,i.backgrounds.push({$element:f,$offsetParent:h,isFixed:"fixed"===f.css("background-attachment"),horizontalOffset:t,verticalOffset:o,startingValueLeft:g[0],startingValueTop:g[1],startingBackgroundPositionLeft:isNaN(parseInt(g[0],10))?0:parseInt(g[0],10),startingBackgroundPositionTop:isNaN(parseInt(g[1],10))?0:parseInt(g[1],10),startingPositionLeft:f.position().left,startingPositionTop:f.position().top,startingOffsetLeft:c,startingOffsetTop:d,parentOffsetLeft:m,parentOffsetTop:v,stellarRatio:f.data("stellar-background-ratio")===a?1:f.data("stellar-background-ratio")})}))},_reset:function(){var e,t,i,a,n;for(n=this.particles.length-1;n>=0;n--)e=this.particles[n],t=e.$element.data("stellar-startingLeft"),i=e.$element.data("stellar-startingTop"),this._setPosition(e.$element,t,t,i,i),this.options.showElement(e.$element),e.$element.data("stellar-startingLeft",null).data("stellar-elementIsActive",null).data("stellar-backgroundIsActive",null);for(n=this.backgrounds.length-1;n>=0;n--)a=this.backgrounds[n],a.$element.data("stellar-backgroundStartingLeft",null).data("stellar-backgroundStartingTop",null),u(a.$element,a.startingValueLeft,a.startingValueTop)},destroy:function(){this._reset(),this.$scrollElement.unbind("resize."+this.name).unbind("scroll."+this.name),this._animationLoop=e.noop,e(t).unbind("load."+this.name).unbind("resize."+this.name)},_setOffsets:function(){var i=this,a=e(t);a.unbind("resize.horizontal-"+this.name).unbind("resize.vertical-"+this.name),"function"==typeof this.options.horizontalOffset?(this.horizontalOffset=this.options.horizontalOffset(),a.bind("resize.horizontal-"+this.name,function(){i.horizontalOffset=i.options.horizontalOffset()})):this.horizontalOffset=this.options.horizontalOffset,"function"==typeof this.options.verticalOffset?(this.verticalOffset=this.options.verticalOffset(),a.bind("resize.vertical-"+this.name,function(){i.verticalOffset=i.options.verticalOffset()})):this.verticalOffset=this.options.verticalOffset},_repositionElements:function(){var e,t,i,a,n,s,o,r,l,c,d=this._getScrollLeft(),h=this._getScrollTop(),p=!0,f=!0;if(this.currentScrollLeft!==d||this.currentScrollTop!==h||this.currentWidth!==this.viewportWidth||this.currentHeight!==this.viewportHeight){for(this.currentScrollLeft=d,this.currentScrollTop=h,this.currentWidth=this.viewportWidth,this.currentHeight=this.viewportHeight,c=this.particles.length-1;c>=0;c--)e=this.particles[c],t=e.isFixed?1:0,this.options.horizontalScrolling?(s=(d+e.horizontalOffset+this.viewportOffsetLeft+e.startingPositionLeft-e.startingOffsetLeft+e.parentOffsetLeft)*-(e.stellarRatio+t-1)+e.startingPositionLeft,r=s-e.startingPositionLeft+e.startingOffsetLeft):(s=e.startingPositionLeft,r=e.startingOffsetLeft),this.options.verticalScrolling?(o=(h+e.verticalOffset+this.viewportOffsetTop+e.startingPositionTop-e.startingOffsetTop+e.parentOffsetTop)*-(e.stellarRatio+t-1)+e.startingPositionTop,l=o-e.startingPositionTop+e.startingOffsetTop):(o=e.startingPositionTop,l=e.startingOffsetTop),this.options.hideDistantElements&&(f=!this.options.horizontalScrolling||r+e.width>(e.isFixed?0:d)&&r<(e.isFixed?0:d)+this.viewportWidth+this.viewportOffsetLeft,p=!this.options.verticalScrolling||l+e.height>(e.isFixed?0:h)&&l<(e.isFixed?0:h)+this.viewportHeight+this.viewportOffsetTop),f&&p?(e.isHidden&&(this.options.showElement(e.$element),e.isHidden=!1),this._setPosition(e.$element,s,e.startingPositionLeft,o,e.startingPositionTop)):e.isHidden||(this.options.hideElement(e.$element),e.isHidden=!0);for(c=this.backgrounds.length-1;c>=0;c--)i=this.backgrounds[c],t=i.isFixed?0:1,a=this.options.horizontalScrolling?(d+i.horizontalOffset-this.viewportOffsetLeft-i.startingOffsetLeft+i.parentOffsetLeft-i.startingBackgroundPositionLeft)*(t-i.stellarRatio)+"px":i.startingValueLeft,n=this.options.verticalScrolling?(h+i.verticalOffset-this.viewportOffsetTop-i.startingOffsetTop+i.parentOffsetTop-i.startingBackgroundPositionTop)*(t-i.stellarRatio)+"px":i.startingValueTop,u(i.$element,a,n)}},_handleScrollEvent:function(){var e=this,t=!1,i=function(){e._repositionElements(),t=!1},a=function(){t||(f(i),t=!0)};this.$scrollElement.bind("scroll."+this.name,a),a()},_startAnimationLoop:function(){var e=this;this._animationLoop=function(){f(e._animationLoop),e._repositionElements()},this._animationLoop()}},e.fn[s]=function(t){var i=arguments;return t===a||"object"==typeof t?this.each(function(){e.data(this,"plugin_"+s)||e.data(this,"plugin_"+s,new n(this,t))}):"string"==typeof t&&"_"!==t[0]&&"init"!==t?this.each(function(){var a=e.data(this,"plugin_"+s);a instanceof n&&"function"==typeof a[t]&&a[t].apply(a,Array.prototype.slice.call(i,1)),"destroy"===t&&e.data(this,"plugin_"+s,null)}):void 0},e[s]=function(){var i=e(t);return i.stellar.apply(i,Array.prototype.slice.call(arguments,0))},e[s].scrollProperty=r,e[s].positionProperty=l,t.Stellar=n}(jQuery,this,document),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):e(jQuery)}(function(e){function t(){var t,i,a={height:c.innerHeight,width:c.innerWidth};return a.height||!(t=l.compatMode)&&e.support.boxModel||(i="CSS1Compat"===t?d:l.body,a={height:i.clientHeight,width:i.clientWidth}),a}function i(){return{top:c.pageYOffset||d.scrollTop||l.body.scrollTop,left:c.pageXOffset||d.scrollLeft||l.body.scrollLeft}}function a(){if(r.length){var a=0,o=e.map(r,function(e){var t=e.data.selector,i=e.$element;return t?i.find(t):i});for(n=n||t(),s=s||i();a<r.length;a++)if(e.contains(d,o[a][0])){var l=e(o[a]),c={height:l[0].offsetHeight,width:l[0].offsetWidth},h=l.offset(),u=l.data("inview");if(!s||!n)return;h.top+c.height>s.top&&h.top<s.top+n.height&&h.left+c.width>s.left&&h.left<s.left+n.width?u||l.data("inview",!0).trigger("inview",[!0]):u&&l.data("inview",!1).trigger("inview",[!1])}}}var n,s,o,r=[],l=document,c=window,d=l.documentElement;e.event.special.inview={add:function(t){r.push({data:t,$element:e(this),element:this}),!o&&r.length&&(o=setInterval(a,250))},remove:function(e){for(var t=0;t<r.length;t++){var i=r[t];if(i.element===this&&i.data.guid===e.guid){r.splice(t,1);break}}r.length||(clearInterval(o),o=null)}},e(c).on("scroll resize scrollstop",function(){n=s=null}),!d.addEventListener&&d.attachEvent&&d.attachEvent("onfocusin",function(){s=null})}),function(e){e.fn.columnize=function(t){function i(e,t){try{e.append(t)}catch(i){e[0].appendChild(t[0])}}this.each(function(){var t=e(this);t.data("columnizer-original-dom",t.clone(!0,!0))}),this.cols=[],this.offset=0,this.before=[],this.lastOther=0,this.prevMax=0,this.debug=0,this.setColumnStart=null,this.elipsisText="";var a={width:400,columns:!1,buildOnce:!1,overflow:!1,doneFunc:function(){},target:!1,ignoreImageLoading:!0,columnFloat:"left",lastNeverTallest:!1,accuracy:!1,precise:!1,manualBreaks:!1,cssClassPrefix:"",elipsisText:"...",debug:0};return t=e.extend(a,t),"string"==typeof t.width&&(t.width=parseInt(t.width,10),isNaN(t.width)&&(t.width=a.width)),"function"==typeof t.setColumnStart&&(this.setColumnStart=t.setColumnStart),"string"==typeof t.elipsisText&&(this.elipsisText=t.elipsisText),t.debug&&(this.debug=t.debug),t.setWidth||(t.precise?t.setWidth=function(e){return 100/e}:t.setWidth=function(e){return Math.floor(100/e)}),this.each(function(){function n(e,t){var i=t?".":"";return f.length?i+f+"-"+e:i+e}function s(a,s,o,r){for(;(p||o.height()<r)&&s[0].childNodes.length;){var l=s[0].childNodes[0];if(e(l).find(n("columnbreak",!0)).length)return;if(e(l).hasClass(n("columnbreak")))return;i(a,e(l))}if(0!==a[0].childNodes.length){var c=a[0].childNodes,d=c[c.length-1];a[0].removeChild(d);var h=e(d);if(3==h[0].nodeType){var u=h[0].nodeValue,f=t.width/18;t.accuracy&&(f=t.accuracy);for(var g,m=null;o.height()<r&&u.length;){var v=u.indexOf(" ",f);g=-1!=v?u.substring(0,v):u,m=document.createTextNode(g),i(a,e(m)),u=u.length>f&&-1!=v?u.substring(v):""}if(o.height()>=r&&null!==m&&(a[0].removeChild(m),u=m.nodeValue+u),!u.length)return!1;h[0].nodeValue=u}return s.contents().length?s.prepend(h):i(s,h),3==h[0].nodeType}}function o(e,t,a,r){if(!e.contents(":last").find(n("columnbreak",!0)).length&&!e.contents(":last").hasClass(n("columnbreak"))&&t.contents().length){var l=t.contents(":first");if(void 0===l.get(0)||1!=l.get(0).nodeType)return;var c=l.clone(!0);if(l.hasClass(n("columnbreak")))i(e,c),l.remove();else if(p)i(e,c),l.remove();else if(1==c.get(0).nodeType&&!c.hasClass(n("dontend")))if(i(e,c),c.is("img")&&a.height()<r+20)l.remove();else if(l.hasClass(n("dontsplit"))&&a.height()<r+20)l.remove();else if(c.is("img")||l.hasClass(n("dontsplit")))c.remove();else{if(c.empty(),s(c,l,a,r))l.addClass(n("split"));else{if(l.addClass(n("split")),"OL"==l.get(0).tagName){var d=c.get(0).childElementCount+c.get(0).start;l.attr("start",d+1)}l.children().length&&o(c,l,a,r)}if(0===c.get(0).childNodes.length)c.remove(),l.removeClass(n("split"));else if(1==c.get(0).childNodes.length){var h=c.get(0).childNodes[0];if(3==h.nodeType){var u=/\S/,f=h.nodeValue;u.test(f)||(c.remove(),l.removeClass(n("split")))}}}}}function r(t){return 3==t.nodeType?!!/^\s+$/.test(t.nodeValue)&&(!!t.previousSibling&&r(t.previousSibling)):1==t.nodeType&&(!!e(t).hasClass(n("dontend"))||0!==t.childNodes.length&&r(t.childNodes[t.childNodes.length-1]))}function l(){if(g=0,u!=c.width()){u=c.width();var a=Math.round(c.width()/t.width),l=t.width,f=t.height;if(t.columns&&(a=t.columns),p&&(a=h.find(n("columnbreak",!0)).length+1,l=!1),a<=1&&a++,!c.data("columnizing")){c.data("columnized",!0),c.data("columnizing",!0),c.empty(),c.append(e("<div style='width:"+t.setWidth(a)+"%; float: "+t.columnFloat+";'></div>")),k=c.children(":last"),i(k,h.clone()),d=k.height(),c.empty();var m=d/a,v=3,_=!1;t.overflow?(v=1,m=t.overflow.height):f&&l&&(v=1,m=f,_=!0);for(var b=0;b<v&&b<20;b++){c.empty();var w,y,k,$;try{w=h.clone(!0)}catch(e){w=h.clone()}w.css("visibility","hidden");for(var D=0;D<a;D++)y=0===D?n("first"):"",y+=" "+n("column"),y=D==a-1?n("last")+" "+y:y,c.append(e("<div class='"+y+"' style='width:"+t.setWidth(a)+"%; float: "+t.columnFloat+";'></div>"));for(D=0;D<a-(t.overflow?0:1)||_&&w.contents().length;){for(c.children().length<=D&&c.append(e("<div class='"+y+"' style='width:"+t.setWidth(a)+"%; float: "+t.columnFloat+";'></div>")),k=c.children().eq(D),_&&k.width(l+"px"),s(k,w,k,m),o(k,w,k,m);k.contents(":last").length&&r(k.contents(":last").get(0));)$=k.contents(":last"),$.remove(),w.prepend($);D++,0===k.contents().length&&w.contents().length?k.append(w.contents(":first")):D!=a-(t.overflow?0:1)||t.overflow||w.find(n("columnbreak",!0)).length&&a++}if(t.overflow&&!_){if(document.all&&-1!=navigator.appVersion.indexOf("MSIE 7.")){for(var x="",C=document.createElement("DIV");w[0].childNodes.length>0;){var T=w[0].childNodes[0];for(D=0;D<T.attributes.length;D++)0===T.attributes[D].nodeName.indexOf("jQuery")&&T.removeAttribute(T.attributes[D].nodeName);C.innerHTML="",C.appendChild(w[0].childNodes[0]),x+=C.innerHTML}e(t.overflow.id)[0].innerHTML=x}else e(t.overflow.id).empty().append(w.contents().clone(!0))}else if(_)c.children().each(function(e){k=c.children().eq(e),k.width(l+"px"),0===e?k.addClass(n("first")):e==c.children().length-1?k.addClass(n("last")):(k.removeClass(n("first")),k.removeClass(n("last")))}),c.width(c.children().length*l+"px");else{k=c.children().eq(c.children().length-1),w.contents().each(function(){k.append(e(this))});var M=(k.height(),0),S=1e7,E=0,j=!1,I=0;c.children().each(function(e){return function(t){var i=e.children().eq(t);if(!i.children(":last").find(n("columnbreak",!0)).length){var a=i.height();j=!1,M+=a,a>E&&(E=a,j=!0),a<S&&(S=a),I++}}}(c));var N=M/I;0===M?b=v:t.lastNeverTallest&&j?(g+=5,m+=30,b==v-1&&v++):E-S>30?m=N+30:Math.abs(N-m)>20?m=N:b=v}c.append(e("<br style='clear:both;'>"))}c.find(n("column",!0)).find(":first"+n("removeiffirst",!0)).remove(),c.find(n("column",!0)).find(":last"+n("removeiflast",!0)).remove(),c.find(n("split",!0)).find(":first"+n("removeiffirst",!0)).remove(),c.find(n("split",!0)).find(":last"+n("removeiflast",!0)).remove(),c.data("columnizing",!1),t.overflow&&t.overflow.doneFunc(),t.doneFunc()}}}var c=e(t.target?t.target:this),d=e(this).height(),h=e("<div></div>"),u=0,p=t.manualBreaks,f=a.cssClassPrefix;"string"==typeof t.cssClassPrefix&&(f=t.cssClassPrefix);var g=0;if(i(h,e(this).contents().clone(!0)),!t.ignoreImageLoading&&!t.target&&!c.data("imageLoaded")&&(c.data("imageLoaded",!0),e(this).find("img").length>0)){var m=function(e,a){return function(){e.data("firstImageLoaded")||(e.data("firstImageLoaded","true"),i(e.empty(),a.children().clone(!0)),e.columnize(t))}}(e(this),h);return e(this).find("img").one("load",m),void e(this).find("img").one("abort",m)}c.empty(),l(),t.buildOnce||e(window).resize(function(){t.buildOnce||(c.data("timeout")&&clearTimeout(c.data("timeout")),c.data("timeout",setTimeout(l,200)))})})},e.fn.uncolumnize=function(){this.each(function(){var t,i=e(this);(t=i.data("columnizer-original-dom"))&&i.replaceWith(t)})},e.fn.renumberByJS=function(t,i,a,n){if(this.setList=function(t,i,a){var n,s=this.before.parents();if(n=e(t[this.offset-1]).find(">*"),n.last()[0].tagName!=a.toUpperCase())return this.debug&&console.log("Last item in previous column, isn't a list..."),0;n=n.length;var o=1;if(o=this.lastOther<=0?this.before.children().length+1:e(s[this.lastOther]).children().length+1,e(t[this.offset]).find(a+":first li.split").length){var r=e(t[this.offset-1]).find(a+":last li:last");if(""===this.elipsisText||e(t[this.offset-1]).find(a+":last ~ div").length||e(t[this.offset-1]).find(a+":last ~ p").length);else if(0==e(r).find("ul, ol, dl").length){var l=r.last().text(),c=l.length;";"==l.substring(c-1)?l.substring(c-4)!=this.elipsisText+";"&&(l=l.substring(0,c-1)+this.elipsisText+";"):l.substring(c-3)!=this.elipsisText&&(l+=this.elipsisText),
r.last().text(l)}0==e(t[this.offset]).find(a+":first >li.split >"+a).length&&o--}if(1==n&&(o+=this.prevMax),this.nest>1){this.debug&&console.log("Supposed to be a nested list...decr"),o--;var d=e(t[this.offset-1]).find(a+":first li.split:first");d.length>0&&(this.debug&&console.log("Previous column started with a split item, so that count is one less than expected"),o--),d=e(t[this.offset]).find(a+":first li:first").clone(),d.children().remove(),e.trim(d.text()).length>0&&(this.debug&&console.log("If that was a complete list in the previous column, don't decr."),o++,0==e(t[this.offset-1]).find(">"+a+":last ").children().length&&(this.debug&&console.log("unless that was empty, in which case revert"),o--))}else{var d=e(t[this.offset]).find(a+":first li:first "+a+".split li.split");d.length>0&&(this.debug&&console.log("[Nested] Column started with a split item, so that count is one less than expected"),o--)}return this.debug&&console.log("Setting the start value to "+o+" ("+this.prevMax+")"),o>0&&("function"==typeof this.setColumnStart?this.setColumnStart(i,o):i.attr("start",o)),0},void 0===a&&(a=!1),void 0===n&&(n=!1),!a&&!n)throw"renumberByJS(): Bad param, must pass an id or a class";var s="";this.prevMax=1,s=n?"."+n:"#"+a;var o=t.toLowerCase(),r=t.toUpperCase();for(this.cols=e(s),this.debug&&console.log("There are "+this.cols.length+" items, looking for "+o),this.before=e(this.cols[0]).find(o+":last"),this.prevMax=this.before.children().length,this.offset=1;this.offset<this.cols.length;this.offset++)if(this.debug&&console.log("iterating "+this.offset+"...[of "+this.cols.length+"]"),this.offset%i!=0){if(this.before=e(this.cols[this.offset-1]).find(o+":last"),this.before.length){this.debug&&console.log("Have some "+t+" elements in the previous column");var l=e(this.cols[this.offset]).find(o+":first"),c=e(this.cols[this.offset]).find("*:first");if(c[0]!==l[0])continue;var d=this.before.parents();this.lastOther=0;for(;this.lastOther<d.length;this.lastOther++)if(d[this.lastOther].tagName!=r&&"LI"!=d[this.lastOther].tagName){!0,this.lastOther--;break}this.nest=1,e(this.cols[this.offset]).find(">"+o+":first li "+o+":first").length&&(this.nest=2),this.setList(this.cols,l,o),this.lastOther--,l=e(this.cols[this.offset]).find(o+":first li "+o+":first"),l.length&&(this.before=e(this.cols[this.offset-1]).find(">"+o+":last li "+o+":last"),this.prevMax=0,this.nest=1,this.setList(this.cols,l,o));var h=e(this.cols[this.offset-1]).find(">"+o+":last");this.prevMax=h.children().length}}else this.debug&&console.log("First column (in theory..)"),this.prevMax=1;return 0}}(jQuery),LoadingDialog.getLoadingImage=function(){return[window.location.protocol,"//s.",window.location.host,"/static/img/common/loader.gif"].join("")},LoadingDialog.prototype.createElement=function(e,t){var i=document.createElement(e);return i.setAttribute("style",this.style(t)),i},LoadingDialog.prototype.createDialog=function(){var e=this.createElement("div",LoadingDialog.DIALOG_STYLE),t=this.createElement("div",LoadingDialog.SPINNER_BOX_STYLE),i=this.createElement("i",LoadingDialog.SPINNER_STYLE);return i.classList.add("fa","fa-2x","fa-spinner","fa-spin"),t.appendChild(i),e.appendChild(t),e},LoadingDialog.prototype.style=function(e){return Object.keys(e).map(function(t){return[t,":",e[t]].join("")}).join(";")},LoadingDialog.prototype.show=function(){this.dialog.parentNode||this.parent.appendChild(this.dialog)},LoadingDialog.prototype.hide=function(){this.dialog.parentNode&&($(".body").removeClass("body_loading"),this.parent.removeChild(this.dialog))},LoadingDialog.show=function(){var e=new LoadingDialog;return e.show(),e},LoadingDialog.showWithTimeout=function(e){$(".body").addClass("body_loading");var t=this.show();return setTimeout(t.hide.bind(t),e),t},LoadingDialog.DIALOG_STYLE={position:"fixed",display:"flex","align-items":"center","justify-content":"center","align-content":"center",top:0,left:0,width:"100%",height:"100%",background:"transparent","pointer-events":"all",opacity:.999999,"z-index":100},LoadingDialog.SPINNER_BOX_STYLE={display:"flex","justify-content":"center","align-content":"center","align-items":"center",width:"60px",height:"60px","background-color":"rgba(127,127,127,0.5)","border-radius":"8px",opacity:.999999},LoadingDialog.SPINNER_STYLE={color:"#ffffff"},function(){var e={positionTop:0,marginLeft:0,heightWrapVal:0,scrollTop:0,heightPopupVal:0,classPopup:"",domEl:$(".js-popup-modal"),wrap:$(".js-popup"),overlayClick:$(".js-popup-overlay"),flagOpen:!1,positionPopup:function(){$(window).height()>e.heightPopupVal?e.positionTop=($(window).height()-e.heightPopupVal)/2-20:e.positionTop=0,$(window).width()>$(".js-popup-modal").width()?e.marginLeft=$(".js-popup-modal").width()/2:e.marginLeft=0},heightPopup:function(){e.heightPopupVal=$(".js-popup-modal").height()},heightOverlay:function(){$(window).height()>e.heightPopupVal?e.heigthOverlayVal=$(window).height():e.heigthOverlayVal=e.heightPopupVal},showPopup:function(t){e.scrollTop=$(document).scrollTop(),e.showOverlay(),$("html").hasClass("touchevents")||$("html").css("padding-right",scrollWidth),$("html").addClass("page-open-popup"),t&&($(".js-popup-modal").addClass(t),e.classPopup=t),e.refreshPos(),e.flagOpen=!0,$(".js-popup-modal").removeClass("popup-modal__loading")},refreshPos:function(){e.heightPopup(),e.heightOverlay(),e.positionPopup(),$(".js-popup-overlay").css({height:e.heigthOverlayVal}),$(".js-popup-modal").css({top:e.positionTop,marginLeft:"-"+e.marginLeft+"px"})},showOverlay:function(){$(".js-overlay-page").show()},hideOverlay:function(){$(".js-overlay-page").hide()},hidePopup:function(){$(".js-popup").is(":visible")&&(e.hideOverlay(),e.flagOpen=!1,$("html").removeClass("page-open-popup").css("padding-right",0),$(".js-popup-modal").removeClass(e.classPopup),e.classPopup="",$(".js-popup-modal").addClass("popup-modal__loading"),$(document).scrollTop(e.scrollTop))}};$("body").on("click",".js-popup-overlay, .js-popup-close",function(){e.hidePopup()}),window.popup=e,$(window).bind("resize",function(){e.flagOpen&&e.refreshPos()}).trigger("resize")}();var $window=$(window),$document=$(document),$html=$("html"),$body=$("body"),htmlHasTouchEvents=$html.hasClass("touchevents"),$searchForm=$("#searchForm"),$outerBlock=$(".outer"),isAuthorized=window.frontRefs.isAuthorized;document.cookie="_ga_au="+Number(isAuthorized)+"; path=/; expires=Tue, 19 Jan 2038 03:14:07 GMT;",function(e){var t=/iPhone/i,i=/iPod/i,a=/iPad/i,n=/(?=.*\bAndroid\b)(?=.*\bMobile\b)/i,s=/Android/i,o=/(?=.*\bAndroid\b)(?=.*\bSD4930UR\b)/i,r=/(?=.*\bAndroid\b)(?=.*\b(?:KFOT|KFTT|KFJWI|KFJWA|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|KFARWI|KFASWI|KFSAWI|KFSAWA)\b)/i,l=/IEMobile/i,c=/(?=.*\bWindows\b)(?=.*\bARM\b)/i,d=/BlackBerry/i,h=/BB10/i,u=/Opera Mini/i,p=/(CriOS|Chrome)(?=.*\bMobile\b)/i,f=/(?=.*\bFirefox\b)(?=.*\bMobile\b)/i,g=new RegExp("(?:Nexus 7|BNTV250|Kindle Fire|Silk|GT-P1000)","i"),m=function(e,t){return e.test(t)},v=function(e){var v=e||navigator.userAgent,_=v.split("[FBAN");return void 0!==_[1]&&(v=_[0]),_=v.split("Twitter"),void 0!==_[1]&&(v=_[0]),this.apple={phone:m(t,v),ipod:m(i,v),tablet:!m(t,v)&&m(a,v),device:m(t,v)||m(i,v)||m(a,v)},this.amazon={phone:m(o,v),tablet:!m(o,v)&&m(r,v),device:m(o,v)||m(r,v)},this.android={phone:m(o,v)||m(n,v),tablet:!m(o,v)&&!m(n,v)&&(m(r,v)||m(s,v)),device:m(o,v)||m(r,v)||m(n,v)||m(s,v)},this.windows={phone:m(l,v),tablet:m(c,v),device:m(l,v)||m(c,v)},this.other={blackberry:m(d,v),blackberry10:m(h,v),opera:m(u,v),firefox:m(f,v),chrome:m(p,v),device:m(d,v)||m(h,v)||m(u,v)||m(f,v)||m(p,v)},this.seven_inch=m(g,v),this.any=this.apple.device||this.android.device||this.windows.device||this.other.device||this.seven_inch,this.phone=this.apple.phone||this.android.phone||this.windows.phone,this.tablet=this.apple.tablet||this.android.tablet||this.windows.tablet,"undefined"==typeof window?this:void 0},_=function(){var e=new v;return e.Class=v,e};"undefined"!=typeof module&&module.exports&&"undefined"==typeof window?module.exports=v:"undefined"!=typeof module&&module.exports&&"undefined"!=typeof window?module.exports=_():"function"==typeof define&&define.amd?define("isMobile",[],e.isMobile=_()):e.isMobile=_()}(this),isMobile.phone&&function(e){function t(){var e=s();e!==o&&(o=e,c.trigger("orientationchange"))}function i(t,i,a,n){var s=a.type;a.type=i,e.event.dispatch.call(t,a,n),a.type=s}e.attrFn=e.attrFn||{};var a="ontouchstart"in window,n={tap_pixel_range:5,swipe_h_threshold:50,swipe_v_threshold:50,taphold_threshold:750,doubletap_int:500,touch_capable:a,orientation_support:"orientation"in window&&"onorientationchange"in window,startevent:a?"touchstart":"mousedown",endevent:a?"touchend":"mouseup",moveevent:a?"touchmove":"mousemove",tapevent:a?"tap":"click",scrollevent:a?"touchmove":"scroll",hold_timer:null,tap_timer:null};e.isTouchCapable=function(){return n.touch_capable},e.getStartEvent=function(){return n.startevent},e.getEndEvent=function(){return n.endevent},e.getMoveEvent=function(){return n.moveevent},e.getTapEvent=function(){return n.tapevent},e.getScrollEvent=function(){return n.scrollevent},e.each(["tapstart","tapend","tapmove","tap","tap2","tap3","tap4","singletap","doubletap","taphold","swipe","swipeup","swiperight","swipedown","swipeleft","swipeend","scrollstart","scrollend","orientationchange"],function(t,i){e.fn[i]=function(e){return e?this.on(i,e):this.trigger(i)},e.attrFn[i]=!0}),e.event.special.tapstart={setup:function(){var t=this,a=e(t);a.on(n.startevent,function e(s){if(a.data("callee",e),s.which&&1!==s.which)return!1;var o=s.originalEvent,r={position:{x:n.touch_capable?o.touches[0].screenX:s.screenX,y:n.touch_capable?o.touches[0].screenY:s.screenY},offset:{x:n.touch_capable?Math.round(o.changedTouches[0].pageX-(a.offset()?a.offset().left:0)):Math.round(s.pageX-(a.offset()?a.offset().left:0)),y:n.touch_capable?Math.round(o.changedTouches[0].pageY-(a.offset()?a.offset().top:0)):Math.round(s.pageY-(a.offset()?a.offset().top:0))},time:Date.now(),target:s.target};return i(t,"tapstart",s,r),!0})},remove:function(){e(this).off(n.startevent,e(this).data.callee)}},e.event.special.tapmove={setup:function(){var t=this,a=e(t);a.on(n.moveevent,function e(s){a.data("callee",e);var o=s.originalEvent,r={position:{x:n.touch_capable?o.touches[0].screenX:s.screenX,y:n.touch_capable?o.touches[0].screenY:s.screenY},offset:{x:n.touch_capable?Math.round(o.changedTouches[0].pageX-(a.offset()?a.offset().left:0)):Math.round(s.pageX-(a.offset()?a.offset().left:0)),y:n.touch_capable?Math.round(o.changedTouches[0].pageY-(a.offset()?a.offset().top:0)):Math.round(s.pageY-(a.offset()?a.offset().top:0))},time:Date.now(),target:s.target};return i(t,"tapmove",s,r),!0})},remove:function(){e(this).off(n.moveevent,e(this).data.callee)}},e.event.special.tapend={setup:function(){var t=this,a=e(t);a.on(n.endevent,function e(s){a.data("callee",e);var o=s.originalEvent,r={position:{x:n.touch_capable?o.changedTouches[0].screenX:s.screenX,y:n.touch_capable?o.changedTouches[0].screenY:s.screenY},offset:{x:n.touch_capable?Math.round(o.changedTouches[0].pageX-(a.offset()?a.offset().left:0)):Math.round(s.pageX-(a.offset()?a.offset().left:0)),y:n.touch_capable?Math.round(o.changedTouches[0].pageY-(a.offset()?a.offset().top:0)):Math.round(s.pageY-(a.offset()?a.offset().top:0))},time:Date.now(),target:s.target};return i(t,"tapend",s,r),!0})},remove:function(){e(this).off(n.endevent,e(this).data.callee)}},e.event.special.taphold={setup:function(){var t,a=this,s=e(a),o={x:0,y:0},r=0,l=0;s.on(n.startevent,function e(c){if(c.which&&1!==c.which)return!1;s.data("tapheld",!1),t=c.target;var d=c.originalEvent,h=Date.now(),u={x:n.touch_capable?d.touches[0].screenX:c.screenX,y:n.touch_capable?d.touches[0].screenY:c.screenY},p={x:n.touch_capable?d.touches[0].pageX-d.touches[0].target.offsetLeft:c.offsetX,y:n.touch_capable?d.touches[0].pageY-d.touches[0].target.offsetTop:c.offsetY};o.x=c.originalEvent.targetTouches?c.originalEvent.targetTouches[0].pageX:c.pageX,o.y=c.originalEvent.targetTouches?c.originalEvent.targetTouches[0].pageY:c.pageY,r=o.x,l=o.y;var f=s.parent().data("threshold")?s.parent().data("threshold"):s.data("threshold"),g=void 0!==f&&!1!==f&&parseInt(f)?parseInt(f):n.taphold_threshold;return n.hold_timer=window.setTimeout(function(){var f=o.x-r,g=o.y-l;if(c.target==t&&(o.x==r&&o.y==l||f>=-n.tap_pixel_range&&f<=n.tap_pixel_range&&g>=-n.tap_pixel_range&&g<=n.tap_pixel_range)){s.data("tapheld",!0);var m=Date.now(),v={x:n.touch_capable?d.touches[0].screenX:c.screenX,y:n.touch_capable?d.touches[0].screenY:c.screenY},_={x:n.touch_capable?Math.round(d.changedTouches[0].pageX-(s.offset()?s.offset().left:0)):Math.round(c.pageX-(s.offset()?s.offset().left:0)),y:n.touch_capable?Math.round(d.changedTouches[0].pageY-(s.offset()?s.offset().top:0)):Math.round(c.pageY-(s.offset()?s.offset().top:0))},b=m-h,w={startTime:h,endTime:m,startPosition:u,startOffset:p,endPosition:v,endOffset:_,duration:b,target:c.target};s.data("callee1",e),i(a,"taphold",c,w)}},g),!0}).on(n.endevent,function e(){s.data("callee2",e),s.data("tapheld",!1),window.clearTimeout(n.hold_timer)}).on(n.moveevent,function e(t){s.data("callee3",e),r=t.originalEvent.targetTouches?t.originalEvent.targetTouches[0].pageX:t.pageX,l=t.originalEvent.targetTouches?t.originalEvent.targetTouches[0].pageY:t.pageY})},remove:function(){e(this).off(n.startevent,e(this).data.callee1).off(n.endevent,e(this).data.callee2).off(n.moveevent,e(this).data.callee3)}},e.event.special.doubletap={setup:function(){var t,a,s,o,r=this,l=e(r),c=null,d=!1;l.on(n.startevent,function e(i){return!(i.which&&1!==i.which||(l.data("doubletapped",!1),t=i.target,l.data("callee1",e),s=i.originalEvent,c||(c={position:{x:n.touch_capable?s.touches[0].screenX:i.screenX,y:n.touch_capable?s.touches[0].screenY:i.screenY},offset:{x:n.touch_capable?Math.round(s.changedTouches[0].pageX-(l.offset()?l.offset().left:0)):Math.round(i.pageX-(l.offset()?l.offset().left:0)),y:n.touch_capable?Math.round(s.changedTouches[0].pageY-(l.offset()?l.offset().top:0)):Math.round(i.pageY-(l.offset()?l.offset().top:0))},time:Date.now(),target:i.target}),0))}).on(n.endevent,function e(h){var u=Date.now(),p=l.data("lastTouch")||u+1,f=u-p;if(window.clearTimeout(a),l.data("callee2",e),f<n.doubletap_int&&h.target==t&&f>100){l.data("doubletapped",!0),window.clearTimeout(n.tap_timer);var g={position:{x:n.touch_capable?h.originalEvent.changedTouches[0].screenX:h.screenX,y:n.touch_capable?h.originalEvent.changedTouches[0].screenY:h.screenY},offset:{x:n.touch_capable?Math.round(s.changedTouches[0].pageX-(l.offset()?l.offset().left:0)):Math.round(h.pageX-(l.offset()?l.offset().left:0)),y:n.touch_capable?Math.round(s.changedTouches[0].pageY-(l.offset()?l.offset().top:0)):Math.round(h.pageY-(l.offset()?l.offset().top:0))},time:Date.now(),target:h.target},m={firstTap:c,secondTap:g,interval:g.time-c.time};d||(i(r,"doubletap",h,m),c=null),d=!0,o=window.setTimeout(function(){d=!1},n.doubletap_int)}else l.data("lastTouch",u),a=window.setTimeout(function(){c=null,window.clearTimeout(a)},n.doubletap_int,[h]);l.data("lastTouch",u)})},remove:function(){e(this).off(n.startevent,e(this).data.callee1).off(n.endevent,e(this).data.callee2)}},e.event.special.singletap={setup:function(){var t=this,a=e(t),s=null,o=null,r={x:0,y:0};a.on(n.startevent,function e(t){return!(t.which&&1!==t.which||(o=Date.now(),s=t.target,a.data("callee1",e),r.x=t.originalEvent.targetTouches?t.originalEvent.targetTouches[0].pageX:t.pageX,r.y=t.originalEvent.targetTouches?t.originalEvent.targetTouches[0].pageY:t.pageY,0))}).on(n.endevent,function e(l){if(a.data("callee2",e),l.target==s){var c=l.originalEvent.changedTouches?l.originalEvent.changedTouches[0].pageX:l.pageX,d=l.originalEvent.changedTouches?l.originalEvent.changedTouches[0].pageY:l.pageY;n.tap_timer=window.setTimeout(function(){var e=r.x-c,s=r.y-d;if(!a.data("doubletapped")&&!a.data("tapheld")&&(r.x==c&&r.y==d||e>=-n.tap_pixel_range&&e<=n.tap_pixel_range&&s>=-n.tap_pixel_range&&s<=n.tap_pixel_range)){var h=l.originalEvent,u={position:{x:n.touch_capable?h.changedTouches[0].screenX:l.screenX,y:n.touch_capable?h.changedTouches[0].screenY:l.screenY},offset:{x:n.touch_capable?Math.round(h.changedTouches[0].pageX-(a.offset()?a.offset().left:0)):Math.round(l.pageX-(a.offset()?a.offset().left:0)),y:n.touch_capable?Math.round(h.changedTouches[0].pageY-(a.offset()?a.offset().top:0)):Math.round(l.pageY-(a.offset()?a.offset().top:0))},time:Date.now(),target:l.target};u.time-o<n.taphold_threshold&&i(t,"singletap",l,u)}},n.doubletap_int)}})},remove:function(){e(this).off(n.startevent,e(this).data.callee1).off(n.endevent,e(this).data.callee2)}},e.event.special.tap={setup:function(){var t,a,s=this,o=e(s),r=!1,l=null,c={x:0,y:0};o.on(n.startevent,function e(i){return o.data("callee1",e),!(i.which&&1!==i.which||(r=!0,c.x=i.originalEvent.targetTouches?i.originalEvent.targetTouches[0].pageX:i.pageX,c.y=i.originalEvent.targetTouches?i.originalEvent.targetTouches[0].pageY:i.pageY,t=Date.now(),l=i.target,a=i.originalEvent.targetTouches?i.originalEvent.targetTouches:[i],0))}).on(n.endevent,function e(d){o.data("callee2",e);var h=d.originalEvent.targetTouches?d.originalEvent.changedTouches[0].pageX:d.pageX,u=d.originalEvent.targetTouches?d.originalEvent.changedTouches[0].pageY:d.pageY,p=c.x-h,f=c.y-u;if(l==d.target&&r&&Date.now()-t<n.taphold_threshold&&(c.x==h&&c.y==u||p>=-n.tap_pixel_range&&p<=n.tap_pixel_range&&f>=-n.tap_pixel_range&&f<=n.tap_pixel_range)){for(var g=d.originalEvent,m=[],v=0;v<a.length;v++){var _={position:{x:n.touch_capable?g.changedTouches[v].screenX:d.screenX,y:n.touch_capable?g.changedTouches[v].screenY:d.screenY},offset:{x:n.touch_capable?Math.round(g.changedTouches[v].pageX-(o.offset()?o.offset().left:0)):Math.round(d.pageX-(o.offset()?o.offset().left:0)),y:n.touch_capable?Math.round(g.changedTouches[v].pageY-(o.offset()?o.offset().top:0)):Math.round(d.pageY-(o.offset()?o.offset().top:0))},time:Date.now(),target:d.target};m.push(_)}i(s,"tap",d,m)}})},remove:function(){e(this).off(n.startevent,e(this).data.callee1).off(n.endevent,e(this).data.callee2)}},e.event.special.swipe={setup:function(){function t(i){r=e(i.currentTarget),r.data("callee1",t),d.x=i.originalEvent.targetTouches?i.originalEvent.targetTouches[0].pageX:i.pageX,d.y=i.originalEvent.targetTouches?i.originalEvent.targetTouches[0].pageY:i.pageY,h.x=d.x,h.y=d.y,l=!0;var a=i.originalEvent;s={position:{x:n.touch_capable?a.touches[0].screenX:i.screenX,y:n.touch_capable?a.touches[0].screenY:i.screenY},offset:{x:n.touch_capable?Math.round(a.changedTouches[0].pageX-(r.offset()?r.offset().left:0)):Math.round(i.pageX-(r.offset()?r.offset().left:0)),y:n.touch_capable?Math.round(a.changedTouches[0].pageY-(r.offset()?r.offset().top:0)):Math.round(i.pageY-(r.offset()?r.offset().top:0))},time:Date.now(),target:i.target}}function i(t){r=e(t.currentTarget),r.data("callee2",i),h.x=t.originalEvent.targetTouches?t.originalEvent.targetTouches[0].pageX:t.pageX,h.y=t.originalEvent.targetTouches?t.originalEvent.targetTouches[0].pageY:t.pageY;var a,o=r.parent().data("xthreshold")?r.parent().data("xthreshold"):r.data("xthreshold"),u=r.parent().data("ythreshold")?r.parent().data("ythreshold"):r.data("ythreshold"),p=void 0!==o&&!1!==o&&parseInt(o)?parseInt(o):n.swipe_h_threshold,f=void 0!==u&&!1!==u&&parseInt(u)?parseInt(u):n.swipe_v_threshold;if(d.y>h.y&&d.y-h.y>f&&(a="swipeup"),d.x<h.x&&h.x-d.x>p&&(a="swiperight"),d.y<h.y&&h.y-d.y>f&&(a="swipedown"),d.x>h.x&&d.x-h.x>p&&(a="swipeleft"),void 0!=a&&l){d.x=0,d.y=0,h.x=0,h.y=0,l=!1;var g=t.originalEvent,m={position:{x:n.touch_capable?g.touches[0].screenX:t.screenX,y:n.touch_capable?g.touches[0].screenY:t.screenY},offset:{x:n.touch_capable?Math.round(g.changedTouches[0].pageX-(r.offset()?r.offset().left:0)):Math.round(t.pageX-(r.offset()?r.offset().left:0)),y:n.touch_capable?Math.round(g.changedTouches[0].pageY-(r.offset()?r.offset().top:0)):Math.round(t.pageY-(r.offset()?r.offset().top:0))},time:Date.now(),target:t.target},v=Math.abs(s.position.x-m.position.x),_=Math.abs(s.position.y-m.position.y),b={startEvnt:s,endEvnt:m,direction:a.replace("swipe",""),xAmount:v,yAmount:_,duration:m.time-s.time};c=!0,r.trigger("swipe",b).trigger(a,b)}}function a(t){r=e(t.currentTarget);var i="";if(r.data("callee3",a),c){var o=r.data("xthreshold"),d=r.data("ythreshold"),h=void 0!==o&&!1!==o&&parseInt(o)?parseInt(o):n.swipe_h_threshold,u=void 0!==d&&!1!==d&&parseInt(d)?parseInt(d):n.swipe_v_threshold,p=t.originalEvent,f={position:{x:n.touch_capable?p.changedTouches[0].screenX:t.screenX,y:n.touch_capable?p.changedTouches[0].screenY:t.screenY},offset:{x:n.touch_capable?Math.round(p.changedTouches[0].pageX-(r.offset()?r.offset().left:0)):Math.round(t.pageX-(r.offset()?r.offset().left:0)),y:n.touch_capable?Math.round(p.changedTouches[0].pageY-(r.offset()?r.offset().top:0)):Math.round(t.pageY-(r.offset()?r.offset().top:0))},time:Date.now(),target:t.target};s.position.y>f.position.y&&s.position.y-f.position.y>u&&(i="swipeup"),s.position.x<f.position.x&&f.position.x-s.position.x>h&&(i="swiperight"),s.position.y<f.position.y&&f.position.y-s.position.y>u&&(i="swipedown"),s.position.x>f.position.x&&s.position.x-f.position.x>h&&(i="swipeleft");var g=Math.abs(s.position.x-f.position.x),m=Math.abs(s.position.y-f.position.y),v={startEvnt:s,endEvnt:f,direction:i.replace("swipe",""),xAmount:g,yAmount:m,duration:f.time-s.time};r.trigger("swipeend",v)}l=!1,c=!1}var s,o=this,r=e(o),l=!1,c=!1,d={x:0,y:0},h={x:0,y:0};r.on(n.startevent,t),r.on(n.moveevent,i),r.on(n.endevent,a)},remove:function(){e(this).off(n.startevent,e(this).data.callee1).off(n.moveevent,e(this).data.callee2).off(n.endevent,e(this).data.callee3)}},e.event.special.scrollstart={setup:function(){function t(e,t){a=t,i(o,a?"scrollstart":"scrollend",e)}var a,s,o=this,r=e(o);r.on(n.scrollevent,function e(i){r.data("callee",e),a||t(i,!0),clearTimeout(s),s=setTimeout(function(){t(i,!1)},50)})},remove:function(){e(this).off(n.scrollevent,e(this).data.callee)}};var s,o,r,l,c=e(window),d={0:!0,180:!0};if(n.orientation_support){var h=window.innerWidth||c.width(),u=window.innerHeight||c.height();r=h>u&&h-u>50,l=d[window.orientation],(r&&l||!r&&!l)&&(d={"-90":!0,90:!0})}e.event.special.orientationchange={setup:function(){return!n.orientation_support&&(o=s(),c.on("throttledresize",t),!0)},teardown:function(){return!n.orientation_support&&(c.off("throttledresize",t),!0)},add:function(e){var t=e.handler;e.handler=function(e){return e.orientation=s(),t.apply(this,arguments)}}},e.event.special.orientationchange.orientation=s=function(){var e=!0,t=document.documentElement;return e=n.orientation_support?d[window.orientation]:t&&t.clientWidth/t.clientHeight<1.1,e?"portrait":"landscape"},e.event.special.throttledresize={setup:function(){e(this).on("resize",m)},teardown:function(){e(this).off("resize",m)}};var p,f,g,m=function(){f=Date.now(),g=f-v,g>=250?(v=f,e(this).trigger("throttledresize")):(p&&window.clearTimeout(p),p=window.setTimeout(t,250-g))},v=0;e.each({scrollend:"scrollstart",swipeup:"swipe",swiperight:"swipe",swipedown:"swipe",swipeleft:"swipe",swipeend:"swipe",tap2:"tap"},function(t,i){e.event.special[t]={setup:function(){e(this).on(i,e.noop)}}})}(jQuery),$.fn.putCursorAtEnd=function(){return this.each(function(){var e=$(this),t=this;if(e.is(":focus")||e.focus(),t.setSelectionRange){var i=2*e.val().length;setTimeout(function(){t.setSelectionRange(i,i)},1)}else e.val(e.val());this.scrollTop=999999})},$(function(){function e(e){var t=-(e.offset().top-10);p.on("touchmove",disableEvent),e.addClass("focus"),$body.addClass(w).scrollTop(0).css({position:"fixed"}).animate({top:t,width:"100%"},100),y&&0==~k.indexOf("?search")&&(k+="?search",history.pushState(null,null,k)),D=!0}function t(e,t){p.off("touchmove",disableEvent),setTimeout(function(){$body.removeClass(w).css({position:"",top:"",width:""}),e.autocomplete("hide"),t.removeClass("focus"),y&&(k=k.replace("?search",""),history.replaceState(null,null,k)),D=!1},50)}function i(e){function t(e){h.submit()}return function(i){n(i.target,e),t(i),i.preventDefault()}}function a(e,t){var a=$(e);a.change(i(t)),n(a,t)}function n(e,t){var i=$(t);$(e).is(":checked")?i.val(1):i.val("")}function s(e,t){$.get("/site/markermap",e,function(e){$(".js-popup-content").html(e),$(".js-popup-modal").removeClass("popup-modal__loading"),popup.showPopup(t)})}window.scrollWidth=function(){var e=document.createElement("p");e.style.width="100%",e.style.height="200px";var t=document.createElement("div");t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.visibility="hidden",t.style.width="200px",t.style.height="150px",t.style.overflow="hidden",t.appendChild(e),document.body.appendChild(t);var i=e.offsetWidth;t.style.overflow="scroll";var a=e.offsetWidth;return i==a&&(a=t.clientWidth),document.body.removeChild(t),i-a}(),$("[data-tel]").focus(function(){var e=$(this);e.val().length<=4&&e.val("+7 (").putCursorAtEnd()}).mask("+7 (000) 000-00-00",{placeholder:"+7 (___) ___-__-__"});var o=!1,r=$(".js-header-open-city");r.click(function(){r.toggleClass("header-city-open")}),r.hover(function(){o=!0},function(){o=!1}),$document.click(function(){!o&&r.hasClass("header-city-open")&&r.toggleClass("header-city-open")}),$(".js-header-city-item").click(function(){var e=$(this);e.hasClass("header-city-popup__item--current")||($(".js-header-city-current").text(e.text()),$(".header-city-popup__item--current").removeClass("header-city-popup__item--current"),e.addClass("header-city-popup__item--current"),$(".header-city-input").val(e.data("cityid")),$(".header-city-form").submit())}),$(".js-city-selector").on("change",function(){$(this).closest("form").submit()}),$(".js-result-txt").each(function(){var e=$(this),t=e.data("ellipsis")?e.data("ellipsis"):100,i=$(".js-result-txt-more");this.scrollHeight<=t+24?(e.css({height:"auto",overflow:"inherit"}),i.remove()):i.click(function(t){t.preventDefault(),e.css({height:"auto",overflow:"inherit"}),$(this).hide()})}),$(".block-relink .show-more-link").click(function(){var e=$(this),t=e.parents(".block-relink").find(".links__content"),i=parseFloat(t.css("height"));return $(".links__inner").height()>i+14&&t.addClass("active").animate({height:$(".links__inner").height()}),e.parent().hide(100),!1});var l={groupBy:"category",showNoSuggestionNotice:!0,noSuggestionNotice:"Ничего не найдено",autoSelectFirst:!0},c=[],d=[];"undefined"!=typeof xmlDataSpeclist&&$.each(xmlDataSpeclist,function(e,t){c.push({value:t.name,data:{category:"Специализация",id:t.id}})}),"undefined"!=typeof xmlDataProvider&&$.each(xmlDataProvider,function(e,t){d.push({value:t.name,data:t.data?t.data:void 0===t.line_id?"region":"metro",id:t.id,line:t.line_id})});var h=$("#searchForm"),u=$(".js-suggest-location",h),p=$(".search__input",h),f=$(".search__field_button",h);p.on("focus",function(){var e=$(this);e.autocomplete("show"),e.hasClass("js-suggest-location")||e.parent().addClass("search__field_active")}),p.mouseup(function(e){e.preventDefault()}),p.on("blur",function(){$(this).parent().removeClass("search__field_active")});var g=$(".js-suggest-search-new",h),m=($html.hasClass("touchevents"),$(".js-choose-input-service",h)),v=$(".js-choose-input-diag",h),_=$(".js-choose-input-spec",h),b=$("[name=isClinicList]"),w="mobile-active overflow",y=window.history,k=window.location.href.toString(),D=!1;if(g.length){var x=g.parent();$(".search__button").on("touchmove",disableEvent);var C=$.extend({},l,{minChars:0,deferRequestBy:200,appendTo:x,serviceUrl:"/autocomplete?isClinicList="+b.val(),autoSelectFirst:!0,onSelect:function(e){if(void 0!==e.data.url)document.location=e.data.url;else{h.removeClass("wide");var t=e.data.type,i=e.data.id;m.val(""),v.val(""),_.val(""),"spec"==t?(_.val(i),b.val(0)):"spec_clinic"==t?(_.val(i),b.val(1)):"diag"==t&&v.val(i)}f.fadeIn()}});isMobile.phone&&(C.autoSelectFirst=!1,C.groupBy="firstLetter"),g.focus(function(){this.select(),this.setSelectionRange(0,this.value.length),isMobile.phone&&e(x)}).blur(function(){g.val()||(m.val(""),v.val(""),_.val("")),isMobile.phone&&t(g,x)}).autocomplete(C)}if(u.length){var T=$(".search__field_icon",h);isMobile.phone?T.on("tap",function(){D||setTimeout(function(){u.trigger("focus")},50)}).on("touchmove",disableEvent):T.on("click",function(){T.data("clicked")||u.trigger("focus")});var M=u.parent(),S=$(".js-choose-input-dist",h),E=$(".js-choose-input-geo",h),j=$(".js-choose-input-regcity",h),I=$.extend({},l,{onHide:function(){T.data("clicked",!1)},onSearchStart:function(){T.data("clicked",!0),M.addClass("search__field_active")},minChars:0,appendTo:M,lookup:d,formatResult:function(e,t){var i="("+t+")",a=e.value.replace(new RegExp(i,"gi"),"<strong>$1</strong>").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/&lt;(\/?strong)&gt;/g,"<$1>");return"metro"==e.data||"metro"==e.data.type?'<div class="i-metro i-metro--line_'+e.line+'"></div>'+a:a},onSelect:function(e){u.data("isDistrict")?S.val(e.id):"regCity"==e.data||"regCity"==e.data.type?(E.val(""),j.val(e.id)):(E.val(e.id),j.val("")),f.fadeIn()}});isMobile.phone&&(I.autoSelectFirst=!1,I.groupBy="firstLetter");var N=debounce(function(i){if("focus"==i.type)return this.select(),this.setSelectionRange(0,this.value.length),void(isMobile.phone&&e(M));u.val()||(u.data("selected",!1),S.val(""),E.val(""),j.val("")),isMobile.phone&&t(u,M)},300);u.focus(N).blur(N).autocomplete(I)}if(isMobile.phone&&($document.on("click tap",".autocomplete-suggestions",disableEvent),$document.on("click tap touchmove",".search-form-white-bg",disableEvent)),isMobile.phone&&$window.on("popstate",function(){D&&($body.removeClass(w),p.trigger("blur"))}),p.length&&!isMobile.phone){var O=g.offset().top,F=u.offset().top;$window.on("scroll",function(){var e=$window.scrollTop(),t=$(".header_main").height()||0;e>O-t&&g.trigger("blur").autocomplete("hide"),e>F-t&&u.trigger("blur").autocomplete("hide")})}a("#kidsReception",".js-choose-input-kidsReception"),a("#departure",".js-choose-input-departure"),a("#booking",".js-choose-input-booking"),a("#dms-policy",".js-choose-input-dms-policy"),a("#all-day",".js-choose-input-all-day"),$(".js-review-form-show").click(function(){var e=$(this),t=e.data("replace");e.data("replace",e.text()),e.text(t),$(".js-review-form").slideToggle(300),$(".button_showform").toggleClass("button_showform-active")}),$(".review-form").on("click","label",function(){var e=$(this).attr("for"),t=$("#"+e);if(t&&"radio"==t.attr("type")&&t.prop("checked"))return t.prop("checked",!1),!1}),$document.on("click",".review__answer-block .review__answer-show .show_answer_link",function(e){e.preventDefault();var t=$(this);return t.parent().hide(),t.parent().find("+ .review__answer").slideDown(),!1}),$document.on("click",".review__answer-block .hide_answer_link",function(e){e.preventDefault();var t=$(this),i=t.parents(".review__answer-block");return i.find(".review__answer").slideUp(function(){i.find(".review__answer-show").show()}),!1}),$(".js-article-to-result").click(function(){$("body, html").animate({scrollTop:$(".js-article-result").offset().top-20},300)}),$(".js-tooltip-custom").each(function(){var e=$(this),t=128,i="tooltip",a=!1;e.hasClass("js-tooltip-custom-price")&&(t=50,i="tooltip tooltip_price"),e.hasClass("js-tooltip-custom-interactive")&&(a=!0,t=124);var n={content:e.parent().find(".js-tooltip-html").children(),theme:i,trigger:e.data("trigger"),position:e.data("position"),arrow:e.data("arrow"),offsetX:t,interactive:a};e.data("clicker")&&(n.autoClose=!1,n.functionReady=function(t,i){$(window).keypress(function(){e.tooltipster("hide")}).click(function(){e.tooltipster("hide")})}),e.tooltipster(n)}),$(".js-tooltip").tooltipster({theme:"tooltip--mini"}),$(".js-price-tab").click(function(){var e=$(this),t=$(".js-price"),i=null,a=null,n=e.data("id");if(n){var s=n.match(/service_(\d+)/);i=s&&s[1];var o=n.match(/diagnostic_(\d+)/);a=o&&o[1]}$(".js-price-tab.price-tabs__link--active").removeClass("price-tabs__link--active"),e.addClass("price-tabs__link--active"),
t.removeClass("hidden"),t.find(".js-price-name").html(e.data("nameGenitive")),t.find('.js-price-content[data-id!="'+n+'"]').addClass("hidden"),t.find('.js-price-content[data-id="'+n+'"]').removeClass("hidden");var r=["js-request-form-hook","js-request-popup"].map(function(e){return"."+e}).join(",");i?t.find(r).data("serviceId",i).data("diagnosticId",null).addClass("js-request-form-hook").removeClass("js-request-popup"):a&&t.find(r).data("serviceId",null).data("diagnosticId",a).removeClass("js-request-form-hook").addClass("js-request-popup")}),$(".js-contacts-show-map").click(function(){$(".js-contacts-map").toggle()}),$(".js-faq-head").click(function(){var e=$(this),t=e.parents(".js-faq");t.find(".js-faq-text:visible").length||($(".js-faq-text:visible").slideUp(300),t.find(".js-faq-text").slideDown(300))}),$(".js-show-map-clincics").click(function(e){e.preventDefault();var t=$(this),i=[],a=[],n=[],s=$('.doctor_desc__request input[name="doctor"]');$.each(s,function(e,t){n.push($(t).val());var s=$("#btn_"+$(t).val());s&&(i.push(s.data("clinicId")),a.push(s.data("stationIds")))});var o=[],r=void 0!=t.data("branch-id")?$("#branch-list-"+t.data("branch-id")+' .clinic-address__button input[name="clinicId"]'):$('.clinic-address__button input[name="clinicId"]');$.each(r,function(e,t){o.push($(t).val())});var l="";t.hasClass("js-result-doctor-clinics__address")&&(l=t.parents(".js-doctor-clinic-item").data("currentId"));var c=$(".doctor-card[data-doctor-id]");return!n.length&&c.length&&n.push(c.data("doctorId")),$.get("/site/markermap",{doctorList:n,clinicList:o,doctorClinicIds:i,stationsIds:a,defaultMarker:l,stationId:t.data("stationId")},function(e){$(".js-popup-content").html(e),$(".js-popup-modal").removeClass("popup-modal__loading"),popup.showPopup("popup-points")}),!1}),isMobile.phone&&$outerBlock.on("click",".js-result-doctor-clinics-all__address",function(e){e.preventDefault();var t=[],i=$(this),a=$('.doctor_desc__request input[name="doctor"]'),n=[],o=$("#branch-list-"+i.data("branch-id")+' .clinic-address__button input[name="clinicId"]'),r=i.parents(".js-doctor-clinic-item").data("currentId"),l=$(".doctor-card[data-doctor-id]");return $.each(a,function(e,i){t.push($(i).val())}),void 0==i.data("branch-id")&&(o=$('.clinic-address__button input[name="clinicId"]')),$.each(o,function(e,t){n.push($(t).val())}),!t.length&&l.length&&t.push(l.data("doctorId")),s({doctorList:t,clinicList:n,defaultMarker:r},"popup-points"),!1}),$outerBlock.on("click",".js-result-doctor-clinics__address",function(e){e.preventDefault();var t=$(this),i=t.data("doctorId")||t.parents(".schedule-root").data("doctorId")||t.parents(".doc__tabs").find(".schedule").data("doctorId")||t.parents(".doctors").data("doctorId"),a=this.getAttribute("data-clinic-id");return console.log({doctorList:[i],clinicList:[a],defaultMarker:i+"-"+a}),s({doctorList:[i],clinicList:[a],defaultMarker:i+"-"+a},"popup-points"),!1}),$(".js-clinic-filials").click(function(e){return e.preventDefault(),s({clinicList:$(this).data("branches"),withBranches:!0},"popup-filials"),!1}),$(".js-popup").on("click",".js-book-close-no",function(){$(".js-book-close").hide()}).on("click",".js-book-close-yes",function(){popup.canClose=!0,popup.hidePopup()}),$(".js-services-show").click(function(){var e=$(this);e.hide(),e.parent().find(".js-services-more").css("display","inline")}),$.magnificPopup&&$(".magnific.image-zoom").magnificPopup({type:"image",closeOnContentClick:!0,closeBtnInside:!1,fixedContentPos:!0,mainClass:"mfp-no-margins mfp-with-zoom",image:{verticalFit:!0},zoom:{enabled:!0,duration:300}}),$(".footer-subscribe-form > form").validate({rules:{email:{required:!0,email:!0}},messages:{required:"Введите e-mail",email:"Введен некорректный e-mail"},errorPlacement:function(e,t){$(t).tooltipster({content:e.text()}).tooltipster("show")},success:function(e,t){$(t).tooltipster("destroy")},submitHandler:function(e,t){var e=$(this.currentForm),i=e.attr("action");return $.ajax({type:"POST",url:i,data:e.serialize(),beforeSend:function(t){if(e.data("submiting"))return!1;e.data("submiting","1")},success:function(t){"ok"==t.result?$(".footer-subscribe-form").replaceWith(t.message):($(e).find("input[type=text]").tooltipster({content:"Ошибка, попробуйте еще раз."}).tooltipster("show"),console.log("Error"))},complete:function(){setTimeout(function(){e.data("submiting",null)},1e3)},error:function(){return!1}}),!1}}),$(".js-select.select-redirect").on("change",function(){document.location=$(this).val()})});var showMsgRequestSent=function(e){if($(".req_form",".js-popup")){var t=$(".req_form",".js-popup"),i=$(".req_form").parent(".js-popup");if($(".js-request-success").length>0){$(".js-request-success").show()}else dispatchTrackingEvent({name:"DoctorForm",action:"inputEmail"}),i.append(e.success),$("body").on("keyup","#requestClientEmail",function(){$(".request-email-container .error").hide(),$("#requestClientEmail").removeClass("form-error")}),$("body").on("click","#requestClientButton",function(){var t=$(this).parent().parent().parent().parent(),i=t.find("#requestClientEmail").val();return i?(dispatchTrackingEvent({name:"DoctorForm",action:"emailSent"}),$.ajax({url:"/client/saveEmail",type:"POST",data:{clientId:e.cl_id,clientEmail:i},success:function(e){parseInt(e)?(t.find(".popup_close").click(),dispatchTrackingEvent({name:"DoctorForm",action:"thankYou"})):(t.find(".client-email-error-not-correctly").show(),t.find("#requestClientEmail").addClass("form-error"))}})):(t.find(".client-email-error-empty").show(),t.find("#requestClientEmail").addClass("form-error")),!1});t.slideUp().addClass("s-closed")}else $(".req_form").html(successText)},showMsgSomethingwrong=function(e,t){if(!e||!t)return!1;var i=$('<label class="error_generic">При отправке формы произошла ошибка, пожалуйста, проверьте введённые данные или просто позвоните нам.</label>');0==$(".error_generic").length&&i.insertAfter(t),e.removeClass("s-disabled")},requestValidate=function(e){e.validate({rules:{requestName:{required:!0,onlyLetters:!0,maxlength:70},requestPhone:{required:!0,minlength:18},requestComments:{maxlength:1e3}},messages:{requestName:{required:"Пожалуйста, введите Ваше имя",maxlength:"Не более 70 символов"},requestPhone:{required:"Укажите полный номер",digits:"Номер телефона должен содержать только цифры",minlength:"Укажите полный номер"},requestComments:{maxlength:"Не более 1000 символов"}},errorPlacement:function(e,t){$(t).parents(".main-recall__input").addClass("form-input_error"),$(t).parent().append(e)},success:function(e,t){e.parent().removeClass("form-input_error"),e.remove()},submitHandler:function(t,i){if(!e[0].formType){var a=document.createElement("input");a.type="hidden",a.name="formType",e[0].appendChild(a)}if(DD.ga&&!e.hasClass("callback_form")){var n=$("[type=submit]",e),s=n.data("stat-trigger"),o=null;switch(s){case"btnCardShortDoctor":DD.ga.eventsList.requestBtnSendCardShortDoctor(),e[0].formType.value="ShortForm",o="doctor short";break;case"btnCardFullDoctor":DD.ga.eventsList.requestBtnSendCardFullDoctor(),e[0].formType.value="FullForm",o="doctor full";break;case"btnCardShortClinic":DD.ga.eventsList.requestBtnSendCardShortClinic(),e[0].formType.value="ShortForm",o="clinic short";break;case"btnCardFullClinic":DD.ga.eventsList.requestBtnSendCardFullClinic(),e[0].formType.value="FullForm",o="clinic full";break;case"btnSendSelectDoctor":DD.ga.eventsList.requestBtnSendSelectDoctor(),e[0].formType.value="FullForm",o="doctor full";break;default:DD.ga.eventsList.errorEvent()}}var r=e.attr("action"),l=null;t.classList.contains("callback_form")?l={name:"DoctorForm",formType:"DoctorsCallbackForm",action:"appSent",pageType:"mainPage"}:t.classList.contains("req_form_doctor")?l={name:"DoctorForm",formType:"DoctorsClinicForm",action:"appSent",pageType:"mainPage"}:t.classList.contains("req_form_clinic")?l={name:"DoctorForm",formType:"DoctorsClinicForm",action:"appSent",pageType:"mainPage"}:t.classList.contains("req_form")&&(l={name:"DoctorForm",formType:"mainPageForm",action:"appSent",pageType:"mainPage"}),l&&(o&&(l.pageType=o),dispatchTrackingEvent(l)),$.ajax({type:"POST",url:r,data:e.serialize(),beforeSend:function(){if(void 0!=e.data("submiting"))return!1;e.data("submiting","1")},success:function(i){var a;try{a=!0}catch(t){a=!1;var n=$('<label class="error_generic">При отправке формы произошла ошибка, пожалуйста, проверьте введённые данные или просто позвоните нам: </label>'),s=$(".header_contacts__phone").text(),r=$('<span style="white-space: nowrap;">'+s+"</span>");n.append(r),0==$(".error_generic").length&&n.insertAfter(e),$(".req_form__submit-btn").removeClass("s-disabled")}if(1==a){var l=null;if(t.classList.contains("callback_form")?l={name:"DoctorForm",formType:"DoctorsCallbackForm",action:"appSuccess",pageType:"mainPage"}:t.classList.contains("req_form_doctor")?l={name:"DoctorForm",formType:"DoctorsClinicForm",action:"appSuccess",pageType:"mainPage"}:t.classList.contains("req_form_clinic")?l={name:"DoctorForm",formType:"DoctorsClinicForm",action:"appSuccess",pageType:"mainPage"}:t.classList.contains("req_form")&&(l={name:"DoctorForm",formType:"mainPageForm",action:"appSuccess",pageType:"mainPage"}),l&&(o&&(l.pageType=o),dispatchTrackingEvent(l)),DD.ga&&!e.hasClass("callback_form")){switch($("[type=submit]",e).data("stat-trigger")){case"btnCardShortDoctor":DD.ga.eventsList.requestSuccessCardShortDoctor();break;case"btnCardFullDoctor":DD.ga.eventsList.requestSuccessCardFullDoctor();break;case"btnCardShortClinic":DD.ga.eventsList.requestSuccessCardShortClinic();break;case"btnCardFullClinic":DD.ga.eventsList.requestSuccessCardFullClinic();break;case"btnSendSelectDoctor":DD.ga.eventsList.requestSuccessSelectDoctor();break;default:DD.ga.eventsList.errorEvent()}}DD.ga&&e.hasClass("callback_form")&&DD.ga.eventsList.requestSuccessCallmeback();var c=i;if("success"==c.status)if($document.trigger("requestCreated",[e[0],c.req_id,c]),0!=c.url&&void 0!==c.url)setTimeout(function(){window.location=c.url},500);else{if(e.hasClass("callback_form")){var d=$('<div class="callback_thanks">Спасибо, что воспользовались нашим сервисом.<br>Оператор свяжется с вами в течение 10 минут</div>');$(".callback_request").html(d)}else e.parent().hasClass("main-recall__form")?(e.parent().append("<span>Ваша заявка принята. Спасибо, что воспользовались нашим сервисом</span>"),e.hide(500),e.blur()):showMsgRequestSent(c);$(".error_generic").length>0&&$(".error_generic").remove()}else showMsgSomethingwrong()}setTimeout(function(){e.data("submiting",null)},1e3)},error:function(){e.data("submiting",null)}})}})},callmebackInit=function(){if($(".js-callmeback").length>0){var e={};e.$self=$(".js-callmeback"),e.$trigger=$(".js-callmeback-tr",e.$self),e.$form=$(".callback_form",e.$self),e.$input=$(".callback_input",e.$self),e.$trigger.on("click",function(){e.$form.removeClass("s-hidden"),e.$input.focus(),dispatchTrackingEvent({name:"DoctorForm",formType:"DoctorsCallbackForm",action:"click",pageType:"mainPage"}),dispatchTrackingEvent({name:"DoctorForm",formType:"DoctorsCallbackForm",action:"formOpen",pageType:"mainPage"})}).on("mouseenter",function(){dispatchTrackingEvent({name:"DoctorForm",formType:"DoctorsCallbackForm",action:"hover",pageType:"mainPage"})})}};$().ready(function(){jQuery.validator.addMethod("onlyLetters",function(e,t){return this.optional(t)||/^[а-яёЁ 0-9 a-z-_.]+$/i.test(e)},"Может состоять только из букв"),$(".req_form").each(function(){requestValidate($(this))}),callmebackInit()}),$(".link-toggle-group-branch").on("click",function(){$("#branch-group-cut-"+$(this).data("clinic-id")).slideToggle()}),$().ready(function(){function e(){$('[name="review"]').closest(".js-clinic-tab").click()}function t(){$(".js-review-form-show").click(),$("html, body").animate({scrollTop:$(".js-review-form").offset().top})}jQuery.validator.addMethod("onlyLetters",function(e,t){return this.optional(t)||/^[а-яёЁ 0-9 a-z-_.]+$/i.test(e)},"Может состоять только из букв"),$(".req_form").each(function(){requestValidate($(this))});var i=$(".clinic-tab-content--doctors");$(".clinic-card-doctors-all__link",i).click(function(){getMoreDoctorsForClinic(!1)}),$(".clinic-card-panel__select select",i).change(function(){getMoreDoctorsForClinic(!0)}),$(".js-reviews-clinic",".reviews").click(function(){getMoreReviewsForClinic()}),callmebackInit(),ratingPopupInit(),$(".clinic-card__desc--switch_show").click(function(){location.href=$(this).parents(".clinic-card").find("a.clinic-card__name").attr("href")}),initRatingStars(),$(".js-toggle").click(function(e){e.preventDefault();var t=$(this);$(".toggle-hidden").toggle();var i=t.data("replace");return t.data("replace",t.html()),t.html(i),!1}),$(".js-reviews-toggle").click(function(){$(".reviews .toggle-hidden:visible").length||$document.scrollTop($(this).offset().top-$(window).height()/2)}),$document.on("click",".repeat-phone",function(){var e=$(this).parents("form");return e.find("[name=validatePhoneCode]").val(""),e.removeClass("wait-code"),!1}),"#review"===location.hash&&e(),"#create_review"===location.hash&&t(),$(window).on("hashchange",function(){"#review"===location.hash&&e(),"#create_review"===location.hash&&t()}),$(".rating-card__note.rating-card__note--link").click(function(e){$(".js-clinic-tab").click()})});var reviewMessages={reviewRating:{required:"Поставьте оценку"},reviewComment:{required:"Пожалуйста, напишите о ваших впечатлениях и результатах приёма, чтобы помочь другим пациентам с выбором",minlength:"Не менее 10 символов"},reviewName:{required:"Введите Ваше имя",onlyLetters:"Может состоять только из букв",maxlength:"Не более 70 символов"},reviewPhone:{required:"Укажите полный номер",minlength:"Укажите полный номер"},validatePhoneCode:{required:"Введите весь код из СМС"}};$(function(){$('a[href*="#"]:not([href="#"])').click(function(){var e=$(this),t=e.data("offset")||0;if(void 0!=e.data("reltab")){var i=e.data("reltab");$(".doctor__tablink[data-rel="+i+"]").trigger("click")}if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var a=$(this.hash);if(a=a.length?a:$("[name="+this.hash.slice(1)+"]"),a.length)return $("html, body").animate({scrollTop:a.offset().top+t},1e3),!1}})}),$(function(){$(".js-showprice").click(function(){var e=$(this);return e.parent().prev(".js-price-table").addClass("price-list-content-full"),e.parent().hide(100),!1})}),$(function(){$(".js-rating").each(function(){var e=$(this),t=e.data("scoreSelector"),i={half:!1,starType:"i",hints:["Ужасно","Плохо","Нормально","Хорошо","Отлично"]};void 0!==t&&(i.targetScore=t,i.click=function(){setTimeout(function(){$(t).change()},0)}),e.raty(i)})}),$(function(){$(".callback").on("click",function(){var e=null,t=$(this).data("page"),i=$(this).data("action");switch(t){case"doctors":e="doctor";break;case"clinic":e="clinic"}!e||"show"!=i&&"group"!=i||(e+=" full"),e&&"index"==i&&(e+=" short"),e&&dispatchTrackingEvent({name:"CallForm",formType:"DoctorsCallButton",action:"click",pageType:e})})});var $callbackButton=$(".callback-block"),$firstScreen=$(".main__section_intro"),$footerSocial=$(".footer__contacts"),toggleCallbackButton=throttle(function(){if($firstScreen.length){if($window.scrollTop()>$firstScreen.offset().top+$firstScreen.height()&&!isScrolledIntoView($footerSocial))return void $callbackButton.fadeIn();$callbackButton.fadeOut()}else{if(isScrolledIntoView($footerSocial))return void $callbackButton.fadeOut();$callbackButton.fadeIn()}},100);isMobile.phone&&$callbackButton.length&&$window.on("scroll",toggleCallbackButton).trigger("scroll");var windowHeight=$window.height(),$firstScreen=$(".main__section_intro");"number"==typeof window.orientation&&($window.on("orientationchange",function(){checkFirstScreenHeight()}),checkFirstScreenHeight());var $callbackForm=$(".callback-form"),$callbackInput=$(".forms__input",$callbackForm),$errorMsg=$(".error",$callbackForm);$callbackForm.length&&($callbackInput.focus(function(){$callbackInput.removeClass("error"),$errorMsg.addClass("hidden")}),$callbackForm.submit(function(e){if(e.preventDefault(),$callbackInput.val().length<18)return $callbackInput.addClass("error"),$errorMsg.removeClass("hidden").text("Укажите полный номер!"),!1;$.ajax({type:"POST",url:$callbackForm.attr("action"),data:$callbackForm.serialize(),beforeSend:function(){if($callbackForm.data("submiting"))return!1;$callbackForm.data("submiting",!0)},success:function(e){"success"==e.status&&($(".callback-form-success").removeClass("hidden"),$errorMsg.addClass("hidden"),dispatchTrackingEvent({name:"docdoc main",formType:"callback form",action:"appSuccess"})),$callbackForm.data("submiting",!1).hide()},error:function(){$errorMsg.removeClass("hidden").text("Ошибка, попробуйте еще раз."),$callbackForm.data("submiting",!1)}})})),$(function(){function e(){var e=$(".search__field_button"),t=e.offset().top+e.height(),a=$(".intro__arrow").offset().top-t;i.css({display:"block",top:t,height:a})}var t=$(".main__section_sales-partners"),i=$(".sale-main");if(0!==t.length){var a=t.bxSlider({responsive:!1,controls:!1,slideWidth:150,startSlide:isMobile.phone?2:0,pause:7e3,minSlides:isMobile.phone?2:10,maxSlides:isMobile.phone?2:10});$window.on("scroll",throttle(function(){isScrolledIntoView(t)&&a.startAuto()},150))}0!==i.length&&(e(),$window.resize(e))}),$(function(){var e=$(".dms-modal"),t=$(".need-dms-auth"),i=$(".dms-modal__close"),a=$(".js-dms-modal-form"),n=function(){setTimeout(function(){e.removeClass("dms-modal__opened")},100)},s=function(){e.addClass("dms-modal__opened")};t.on("tap click",function(e){e.preventDefault(),e.stopPropagation(),$(".sortmodal").removeClass("sortmodal_opened"),s()}),i.on("tap click",n),a.on("input",function(e){e.preventDefault();var t=a.find("#companyId").val(),i=a.find("#number").val(),n=a.find("#lastName").val(),s=a.find("input[type=submit]");t&&i&&n?s.removeClass("disabled"):s.addClass("disabled")}),a.on("submit",function(e){e.preventDefault();var t=a.prop("action"),i=a.serialize(),n=a.find("#companyId").val();$.ajax({type:"GET",url:t,data:i,dataType:"json",beforeSend:function(){a.attr("disabled",!0),a.removeClass("error"),a.attr("data-error","")},success:function(e){if(e.url)if(2==n)window.location=e.url;else{var t=window.location.pathname;t.indexOf("/page/")>=0&&(t=t.substr(0,t.indexOf("/page/"))),t.indexOf("/dms-policy")<0&&(t+="/dms-policy"),window.location=window.location.origin+t}0===e.success&&e.message&&(a.addClass("error"),a.attr("data-error",e.message),a.attr("disabled",!1))},error:function(e){a.addClass("error"),a.attr("data-error",e.responseText),a.attr("disabled",!1)}})})}),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e("object"==typeof exports?require("jquery"):jQuery)}(function(e){function t(e){return r.raw?e:encodeURIComponent(e)}function i(e){return r.raw?e:decodeURIComponent(e)}function a(e){return t(r.json?JSON.stringify(e):String(e))}function n(e){0===e.indexOf('"')&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return e=decodeURIComponent(e.replace(o," ")),r.json?JSON.parse(e):e}catch(e){}}function s(t,i){var a=r.raw?t:n(t);return e.isFunction(i)?i(a):a}var o=/\+/g,r=e.cookie=function(n,o,l){if(void 0!==o&&!e.isFunction(o)){if(l=e.extend({},r.defaults,l),"number"==typeof l.expires){var c=l.expires,d=l.expires=new Date;d.setTime(+d+864e5*c)}return document.cookie=[t(n),"=",a(o),l.expires?"; expires="+l.expires.toUTCString():"",l.path?"; path="+l.path:"",l.domain?"; domain="+l.domain:"",l.secure?"; secure":""].join("")}for(var h=n?void 0:{},u=document.cookie?document.cookie.split("; "):[],p=0,f=u.length;p<f;p++){var g=u[p].split("="),m=i(g.shift()),v=g.join("=");if(n&&n===m){h=s(v,o);break}n||void 0===(v=s(v))||(h[m]=v)}return h};r.defaults={},e.removeCookie=function(t,i){return void 0!==e.cookie(t)&&(e.cookie(t,"",e.extend({},i,{expires:-1})),!e.cookie(t))}}),function(e){e.fn.initBlocks=function(){return this.each(function(){e(this).find("[data-block]").add(e(this).filter("[data-block]")).each(function(){var t=e(this).attr("data-block"),i="function"==typeof this.onclick?this.onclick():{};if(i.hasOwnProperty(t)&&(i=i[t]),!e(this)[e(this).attr("data-block")])throw"Unknown block: "+e(this).attr("data-block");e(this)[e(this).attr("data-block")](i)})})}}(jQuery),function(e){e.widget("block.stickydate",{_create:function(){if(self=this,e(".doctors__item").size()>0){var t=e(".doctors__item").first().offset();e(window).on("scroll",function(){var t=e(".doctors__item").first().offset();e(document).scrollTop()>t.top?self._show():self._hide()}),e(document).scrollTop()>t.top&&self._show()}},_hide:function(){self._delMod("opened")},_show:function(){self._setMod("opened")}})}(jQuery),function(e){e.widget("block.select",{_create:function(){this._elem("head").text().length||this._selectValue(!1,!0),this._listen("click",this._elem("head"),this._toggle),this._listen("click",this._elem("item"),this._selectValue),this._avoidEvent("click",this._hide),this._listen("mousewheel DOMMouseScroll",this._elem("list"),this._preventScroll)},_toggle:function(e){if(this._hasMod("disabled"))return!1;this._hasMod(this._elem("list"),"opened")?this._hide():this._show()},_hide:function(){this._delMod(this._elem("head"),"opened"),this._delMod(this._elem("list"),"opened")},_show:function(){this._setMod(this._elem("head"),"opened"),this._setMod(this._elem("list"),"opened")},_initScroll:function(){this._elem("list")[0].scrollTop=0,this._elem("list").jScrollPane()},_preventScroll:function(e){var t=e.originalEvent,i=t.wheelDelta||-t.detail;this._elem("list")[0].scrollTop+=25*(i<0?1:-1),e.preventDefault()},_selectValue:function(t,i){return t?($el=e(t.currentTarget),this._delMod(this._elem("item"),"selected")._setMod($el,"selected")):($selected=this._elem("list").find("."+this._getModElemClass("item","selected")),$el=$selected.length?$selected:this._elem("item").first()),this._setValue($el,i)._hide(),this},_setValue:function(e,t){var i=e.html(),a=e.data("value")?e.data("value"):i;return this._elem("head").html(i),this._elem("value").prop("value",a),t||this._elem("value").trigger("change"),this},setState:function(e){switch(e){case"enable":this._delMod("disabled");break;case"disable":this._setMod("disabled")}return this},_emptyList:function(){return this._elem("list").empty(),this},loadList:function(e,t){if(this._emptyList(),"object"==typeof e)for(var i in e)this._insertItem([i,e[i]]);this._selectValue(!1,!0),"function"==typeof t&&t()},loadCategoriesList:function(e,t){if(this._emptyList(),"object"==typeof e)for(var i in e)this._insertItem([e[i].url,e[i].name]);this._selectValue(),"function"==typeof t&&t()},_insertItem:function(e){var t='<span class="'+this._getElemClass("item");t+='" data-value="'+e[0],t+='">'+e[1]+"</span>",this._elem("list").append(t)},toggleHeadDiscount:function(e){this._delMod(this._elem("head"),"discount"),this._elem("item").filter("."+this._getModElemClass("item","selected")).data("oldprice")&&this._setMod(this._elem("head"),"discount")},defaultSelect:function(){this._selectValue(!1,!0)}})}(jQuery),$(document).initBlocks(),app={};var $html=$("html"),hasTouchEvents=$html.hasClass("touchevents"),pressEventEnd=hasTouchEvents?"touchend":"click",pressEventStart=hasTouchEvents?"touchstart":"click",pressEventStartEnd=hasTouchEvents?"touchstart touchend":"click";initExpander(),app.leftmenu=function(){var e=$(".header__burger"),t=$(".leftmenu"),i=$(".body"),a=function(){e.toggleClass("active"),t.toggleClass("active"),i.toggleClass("active")};e.on(pressEventEnd,function(e){e.preventDefault(),a()}),t.on(pressEventEnd,"a",function(){a()}),$(".leftmenu__overlay").on(pressEventEnd,function(){a()})}(),app.nearbyCarousel=function(){if($(".nearby__carousel").length>0){var e="",e=function(){var e=window.innerWidth;if(e>=1024)var t=3,i={slideWidth:291,slideMargin:16};else if(e<=1023&&e>=768)var t=2,i={slideWidth:600,slideMargin:16};else var t=1,i={slideWidth:0,slideMargin:0};var a={easing:"linear",moveSlides:1,pager:!1,prevText:"",nextText:"",speed:300,responsive:!0,minSlides:t,maxSlides:4,nextText:"",prevText:"",infiniteLoop:!0,swipeThreshold:2,oneToOneTouch:!1};return $.extend(i,a)},t=$(".nearby__carousel").bxSlider(e());$(window).on("resize",function(){var i=e();t.reloadSlider(i)})}}();var delay=function(){var e=0;return function(t,i){clearTimeout(e),e=setTimeout(t,i)}}();app.rightbar=function(){if($(window).innerWidth()>767){var e=function(){var e=$(".doctor__right"),t=window.innerHeight;e.height()<t?e.stick_in_parent({sticky_class:"doctor__right_fixed"}):($(".doctor__right").hasClass("doctor__right_fixed")&&$("html, body").animate({scrollTop:$(".doctor__inner").offset().top-40},1e3),e.trigger("sticky_kit:detach")),$(".doctor__right").on("sticky_kit:bottom",function(e){$(this).parent().css("position","static")}).on("sticky_kit:unbottom",function(e){$(this).parent().css("position","relative")})};e(),$(window).on("resize orientationchange",function(){delay(function(){e()},100)})}},app.rightbar(),app.mobileDocTabs=function(){var e=$(".doctor__tablink"),t=".doctor__tab";e.on(pressEventEnd,function(i){i.preventDefault(),i.stopPropagation(),e.removeClass("doctor__tablink_active"),$(this).addClass("doctor__tablink_active");var a=$(this).data("rel");$(t).hide(),$(".doctors").find(t+"[data-tab="+a+"]").show(),$(window).trigger("change")});var i=$(window).width();$(window).on("resize",function(){$(window).width()!=i&&(i=$(window).width(),delay(function(){$(window).innerWidth()>767?$(".doctor__tab").show():($(".doctor__tab").hide(),$(".doctor__tab_reviews, .doctor__tab_docs").show(),e.removeClass("doctor__tablink_active"),e.eq(0).addClass("doctor__tablink_active"))},200))})}(),app.slider=function(){function e(e){$(".carousel__list").each(function(t){var i=$(this),n={},o=i.closest(".carousel");n.touchEnabled=!1,o.data("clinic")||o.data("relative");var r=$.extend(n,s(e));a[t]=i.bxSlider(r)}),$(".outer").on(pressEventEnd,".carousel__next a, .carousel__prev a",function(e){e.stopPropagation();var t=$(this),i="goToPrevSlide";if(t.closest(".carousel").data("relative")){var n=t.closest(".carousel"),s=n.data("relative"),o=$(".carousel[data-clinic="+s+"]");t.hasClass("carousel__toleft")?(n.find(".bx-prev").trigger("click"),o.find(".bx-prev").trigger("click")):t.hasClass("carousel__toright")&&(n.find(".bx-next").trigger("click"),o.find(".bx-next").trigger("click"))}else t.hasClass("carousel__toright")&&(i="goToNextSlide"),$.each(a,function(e,t){t[i]()})})}function t(){$.each(a,function(e,t){t.destroySlider()})}function i(e){var t=s(e);$.each(a,function(e,i){var a=$(this),n=a.closest(".carousel"),s={};s.touchEnabled=!1,n.data("clinic")||n.data("relative");var o=$.extend(s,t);i.reloadSlider(o)})}var a=[],n=$(window),s=function(e){var t=window.innerWidth,i=1,n=0,s=0;return t>=1024?(i=4,n=79,s=14):t<=1023&&t>=768&&(i=4,n=64,s=5),$(".doc__slidedate").on(pressEventEnd,function(e){e.preventDefault(),e.stopPropagation();var t=$(this).data("slide"),n=$(".carousel__item").filter('[data-date="'+t+'"]').index()/i;$.each(a,function(e,t){t.goToSlide(Math.floor(n))})}),{startSlide:e||0,easing:"linear",pager:!1,controls:!0,speed:300,infiniteLoop:!1,responsive:!0,adaptiveHeight:!0,minSlides:i,maxSlides:i,moveSlides:i,slideWidth:n,slideMargin:s,prevText:"",nextText:"",swipeThreshold:2,oneToOneTouch:!1,preventDefaultSwipeY:!0,onSliderLoad:function(e){0==e&&$(".carousel__prev a").addClass("disabled")},onSlideAfter:function(e,t,n){var s=e.closest(".carousel_date");0==n?s.find(".carousel__prev a").addClass("disabled"):s.find(".carousel__prev a").removeClass("disabled"),n==Math.floor(a[0].getSlideCount()/i)-1?s.find(".carousel__next a").addClass("disabled"):s.find(".carousel__next a").removeClass("disabled")},onSlideNext:function(e){e.closest(".carousel").find(".carousel__next a").trigger(pressEventEnd)},onSlidePrev:function(e,t,i){e.closest(".carousel").find(".carousel__prev a").trigger(pressEventEnd)}}};e(),window.reloadSliders=i,$(".carousel__list").on("reloadSliders",function(){e(window.scheduleTools.sliderOffset)});var o=n.width();$(".carousel").length&&(n.on("resize orientationchange",function(){var e=a[0].getCurrentSlide();n.width()!=o&&(o=n.width(),setTimeout(function(){i(e)},1))}),n.on("change",function(){var n=a[0].getCurrentSlide();t(),e(n),i(n)}))}(),app.clinicSlider=function(){if($(".clinic__slider-item").size()>1){$(".clinic__slider-container").bxSlider({pager:!1,nextText:"",prevText:"",responsive:!0})}}(),app.tabs=function(){function e(){var e=$(".tabs__button");$(".tabs__item");e.on(pressEventEnd,function(e){e.preventDefault(),e.stopPropagation();var t=$(this),i=t.data("rel");t.closest(".tabs").find(".tabs__button").removeClass("tabs__button_active"),t.addClass("tabs__button_active"),t.closest(".tabs").find(".tabs__item").removeClass("tabs__item_active"),$('div[data-tab="'+i+'"]').addClass("tabs__item_active")})}e(),$(window).on("change",function(){e()})}(),app.sortmodal=function(){var e=$(".sortmodal"),t=$(".header__link_settings"),i=$(".sortmodal__close"),a=function(){setTimeout(function(){e.removeClass("sortmodal_opened"),$body.removeClass("overflow").off("touchmove",disableEvent),$callbackButton.show()},100),$window.on("scroll",toggleCallbackButton)},n=function(){$window.off("scroll",toggleCallbackButton),$callbackButton.hide(),e.addClass("sortmodal_opened"),$body.addClass("overflow").on("touchmove",disableEvent)};t.on(pressEventEnd,function(e){e.preventDefault(),e.stopPropagation(),n()}),i.on("tap",a)}(),app.mainChoose=function(){if($(".choose__slider").length){$(".choose__slider").bxSlider({mode:"fade",easing:"linear",responsive:!0,controls:!1,pagerCustom:".choose__list",speed:100}),$(".choose__list-item").on("mouseenter",function(){self=$(this),setTimeout(function(){self.trigger("click")},100)})}}(),app.stellar=function(){$(window).stellar({horizontalScrolling:!1})}(),app.mainDoctors=function(){$(".main__doctors-trigger").on("inview",function(e,t){t?$(".main__doctors").addClass("main__doctors_active"):$(".main__doctors").removeClass("main__doctors_active")})}(),app.certificateSlider=function(){if($(".certificate__slider").length){var e="",e=function(){if(window.innerWidth<768)var e=3,t={slideWidth:500};else var e=6,t={slideWidth:300};var i={easing:"linear",moveSlides:1,pager:!1,prevText:"",nextText:"",speed:300,responsive:!0,minSlides:e,maxSlides:4,nextText:"",prevText:"",infiniteLoop:!1,swipeThreshold:2,oneToOneTouch:!1,hideControlOnEnd:!0};return $.extend(t,i)},t=$(".certificate__slider").bxSlider(e());$(window).on("resize",function(){var i=e();t.reloadSlider(i)})}}(),app.branches=function(){$(".js-all-clinic").on("click",function(e){e.preventDefault(),e.stopPropagation();var t=$(this).closest(".clinics-item");t.find(".js-clinic-card-hidden").toggleClass("hidden"),$(this).toggleClass("js-all-clinic-active"),$(this).hasClass("js-all-clinic-active")?$(this).html($(this).data("text-replace")):$(this).html($(this).data("text-default")),t.find(".js-clinic-card-hidden").hasClass("hidden")&&$("html, body").animate({scrollTop:t.offset().top+15},500)})}(),app.serviceList=function(){$(".js-all-service").on("click",function(e){e.preventDefault(),e.stopPropagation(),$(this).closest("ul").find(".hidden").css("display","inline"),$(this).parent().remove()})}(),app.letters=function(){var e=".js-library-letter-more";$(".js-library-letter").each(function(){$(this).find("li").size()<=4&&$(this).next(e).hide()}),$(e).on("click",function(){$(this).hide().prev(".js-library-letter").addClass("active")})}(),app.alphabet=function(){var e=$(".library__alphabet-inner"),t=window.innerWidth,i="";_init=function(){i=e.bxSlider({pager:!1,responsive:!0,slideWidth:27,minSlides:9,maxSlides:30,infiniteLoop:!1,prevText:"",nextText:""})},_destroy=function(){i&&i.destroySlider()},e.length&&t<768&&_init(),$(window).on("resize orientationchange",function(){var t=window.innerWidth;setTimeout(function(){e.length&&t<768?(_destroy(),_init()):_destroy()},100)})}(),app.libraryTabs=function(){if($(".library__intro").length){var e=$(".library__intro-list a"),t=".library__intro-right p"
;e.on("click",function(i){i.preventDefault(),i.stopPropagation();var a=$(this).data("rel");$(t).hide(),e.removeClass("active"),$(this).addClass("active"),$(t+'[data-tab="'+a+'"]').show()})}}(),app.libraryAddit=function(){$(".library__addit").length&&$(".js-library-addit-more").on("click",function(e){e.preventDefault(),e.stopPropagation(),$(this).parent().hide().closest(".library__addit").addClass("opened").find(".js-library-addit").css("height","auto")})}(),app.libraryTags=function(){$(".js-library-tags-more").on("click",function(e){e.preventDefault(),e.stopPropagation(),$(this).hide().prev(".js-library-tags-hidden").show()})}(),app.showSearchButton=function(){$(".search__field").on("click",".autocomplete-suggestion",function(){$(".search__field_button").slideDown()})}(),function(){if($(".js-short-description").find("hr").length){$(".js-short-description").find("hr").replaceWith("#sp#");var e=$(".js-short-description").html().split("#sp#"),t=e[0],i=e[1];$(".js-short-description").html(t+'<p><a href="javascript:void(0);" class="toggle-text">читать далее</a></p><div class="js-full-description">'+i+'<p><a href="javascript:void(0);" class="toggle-text" style="display: none;">скрыть</a></p></div>'),$(".toggle-text").click(function(){$(".js-full-description").toggle(),$(".toggle-text").toggle()})}else{if($(".doctors__map").length)var a=$(".doctors__map").height()+30,n=$(".doctors__map").height()-22;else if($(".clinics__map").length)var a=$(".clinics__map").height()+30,n=$(".clinics__map").height()-22;else if($(".clinic__content .clinic__right").length)var a=$(".clinic__content .clinic__right").height()+5-$(".clinic__reg").outerHeight(),n=a-30;else if($(".service__order").length)var a=$(".service__order").height()+30,n=$(".service__order").height()-22;else var a=117,n=a;n=n<100?100:n,$(".js-short-description").height()>a&&($(".js-short-description").css({height:n+"px"}).addClass("shadow-overflow").parent().append('<div class="showmore"><a href="javascript:void(0);" class="toggle-text">читать далее</a></div>'),$(".toggle-text").on("click",function(){$(".js-short-description").css({height:"auto",overflow:"visible"}).removeClass("shadow-overflow"),$(this).hide()}))}}(),app.showAboutPress=function(e){$(".js-about-press-more").on("click",function(e){e.preventDefault(),e.stopPropagation(),$(this).hide(),$(".js-about-press-items").slideDown("fast")})}(),app.aboutFaq=function(){$(".js-about-question").on("click",function(){$(this).next(".js-about-answer").slideToggle("fast")})}(),app.aboutFaqForm=function(e){$(".js-about-form").on("click",function(e){e.preventDefault(),e.stopPropagation();var t=$(this).data("html");$(".js-popup-content").html($(t).html()),popup.showPopup("popup-about")})}(),app.applicationBanner=function(e){var t=$(".js-appbanner"),i=$(".js-appbanner-close",t);null==$.cookie("app_banner_close")&&isMobile.phone&&$window.load(function(){setTimeout(function(){t.addClass("appbanner__opened"),i.on("tap",function(){t.removeClass("appbanner__opened"),$.cookie("app_banner_close",!0,{expires:30,path:"/"})})},1e3)})}(),app.formNumber=function(){var e=$(".js-form-plus"),t=$(".js-form-minus"),i=$(".js-form-number");i.on("keyup",function(){$(this).val($(this).val().replace(/[^0-9]/g,""))}),e.on("click",function(){var e=parseInt(i.val())+1;a(e)}),t.on("click",function(){if(i.val()>=2){var e=parseInt(i.val())-1;a(e)}});var a=function(e){i.val(e).change()}}(),app.mainTabs=function(){var e=$(".benefits__button > a"),t=$(".benefits__tab");e.on("click",function(e){e.preventDefault(),e.stopPropagation()}),e.on("mouseover",function(){var i=$(this).data("rel");$(this).hasClass("active")||(e.removeClass("active"),$(this).addClass("active"),t.hide(),$('div[data-tab="'+i+'"]').fadeIn("fast"))})}(),app.mainFaq=function(){$(".js-main-question").on("click",function(){$(this).parent().toggleClass("active")})}(),app.mainHeader=function(){var e=$(".header_main");if(e.length){var t=$(window).scrollTop(),i=e.offset().top,a=!1;if(t>0?e.addClass("header_show"):(e.addClass("header_show header_animate"),setTimeout(function(){e.removeClass("header_animate")},800)),!isMobile.phone){var n=throttle(function(t){t>=e.height()+i+10?(a||(e.css("top",-e.height()).animate({top:0},300),a=!0),e.addClass("header_main-fixed")):(e.css("top","").removeClass("header_main-fixed"),a=!1)},50);$(window).on("scroll",function(){t=$(window).scrollTop(),n(t)}).trigger("scroll")}}}(),app.settingsPopups=function(){$(".js-phone-change").on("click",function(e){e.preventDefault(),e.stopPropagation();var t=$(this).data("html");$(".js-popup-content").html($(t).html()),popup.showPopup("popup-lk")}),$(".popup").on("click",".js-fake-phone-submit",function(){popup.hidePopup();var e=$(".confirm-phone").html();$(".js-popup-content").html(e),popup.showPopup("popup-lk")}),$(".popup").on("click",".js-fake-phone-send",function(){popup.hidePopup();var e=$(".save-phone").html();$(".js-popup-content").html(e),popup.showPopup("popup-lk")}),$(".js-email-change").on("click",function(e){e.preventDefault(),e.stopPropagation();var t=$(".change-email").html();$(".js-popup-content").html(t),popup.showPopup("popup-lk")}),$(".popup").on("click",".js-fake-email-submit",function(){popup.hidePopup();var e=$(".save-email").html();$(".js-popup-content").html(e),popup.showPopup("popup-lk")}),$(".js-password-change").on("click",function(e){e.preventDefault(),e.stopPropagation();var t=$(".change-password").html();$(".js-popup-content").html(t),popup.showPopup("popup-lk")}),$(".popup").on("click",".js-fake-password-submit",function(){popup.hidePopup();var e=$(".save-password").html();$(".js-popup-content").html(e),popup.showPopup("popup-lk")}),$(".js-delete-favorite").on("click",function(e){e.preventDefault(),e.stopPropagation();var t=$(this).data("html");$(".js-popup-content").html($(t).html()),popup.showPopup("popup-lk")}),$(".js-order-cancel").on("click",function(e){e.preventDefault(),e.stopPropagation();var t=$(this).data("html");$(".js-popup-content").html($(t).html()),popup.showPopup("popup-lk")}),$(".popup").on("click",".js-content-close",function(){popup.hidePopup()})}();var slider=function(){function e(e){$(".slider").each(function(t){var i={touchEnabled:!1},a=$.extend(i,u(e));r[t]=$(this).bxSlider(a)}),o=r[0].getSlideCount()-1,o<=l&&($(".slot-day-selector__prev").hide(),$(".slot-day-selector__next").hide()),h.on("resize orientationchange",i),$(".slot-day-selector__next, .slot-day-selector__prev").on("click",function(e){e.preventDefault();var t=$(this),i="goToPrevSlide";t.hasClass("slot-day-selector__next")&&(i="goToNextSlide"),$.each(r,function(e,t){t[i]()}),s=r[0].getCurrentSlide();var a=Math.floor(o/l),n="removeClass",c="removeClass";0==s&&(n="addClass"),s==a&&(c="addClass"),$(".slot-day-selector__prev")[n]("disabled"),$(".slot-day-selector__next")[c]("disabled")})}function t(){$.each(r,function(e,t){t.destroySlider()})}function i(){var e=u(s);$.each(r,function(t,i){var a={touchEnabled:!0},n=$.extend(a,e);i.reloadSlider(n)})}var a,n,s=0,o=0,r=[],l=1,c=$(".slot-day-selector__prev"),d=$(".slot-day-selector__next"),h=$(window),u=function(e){return window.innerWidth>489?(l=4,a=79,n=14):(l=1,a=0,n=0),{startSlide:e||0,easing:"linear",pager:!1,speed:300,infiniteLoop:!1,responsive:!0,adaptiveHeight:!0,minSlides:1,maxSlides:4,moveSlides:l,slideWidth:a,slideMargin:n,prevText:"",nextText:"",swipeThreshold:2,oneToOneTouch:!1,preventDefaultSwipeY:!0,onSliderLoad:function(e){0==e&&c.addClass("disabled")},onSlideBefore:function(){$(".slot-selector__viewport").scrollTop(0)},onSlideAfter:function(e,t,i){0==i?c.addClass("disabled"):c.removeClass("disabled"),i==Math.floor(r[0].getSlideCount()/l)-1?d.addClass("disabled"):d.removeClass("disabled")},onSlideNext:function(e){d.trigger("click")},onSlidePrev:function(e){c.trigger("click")}}},p=h.width();return $(".slider").length&&(h.on("resize orientationchange",function(){r[0].getCurrentSlide();h.width()!=p&&(p=h.width(),setTimeout(function(){i()},100))}),h.on("change",function(){var a=r[0].getCurrentSlide();t(),e(a),i()})),{initSliders:e,reloadSliders:i}}();